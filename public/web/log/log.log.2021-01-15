2021/01/15 07:13:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:13:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:13:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:13:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:46 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:14:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:14:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:15:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:35 [I] home.go 65: Go to user home page: /home
2021/01/15 07:16:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:17:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:18:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:20:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:20 [I] fs.go 38: Write file (attr) /assets/images/entity/png/people/man.png PUT
2021/01/15 07:22:20 [I] fs.go 77: Write attr: {"remark":"","ctime":1610666887128,"author":"admin","icon":"/fs/assets/images/files/png/png.png?type=download&issys=true"}
2021/01/15 07:22:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:20 [I] fs.go 322: Rename file /assets/images/entity/png/people/man.png to /assets/images/entity/png/people/320911197004200910.png POST
2021/01/15 07:22:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:35 [I] fs.go 38: Write file (attr) /assets/images/entity/png/people/oman.png PUT
2021/01/15 07:22:35 [I] fs.go 77: Write attr: {"remark":"","ctime":1610666903373,"author":"admin","icon":"/fs/assets/images/files/png/png.png?type=download&issys=true"}
2021/01/15 07:22:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:36 [I] fs.go 322: Rename file /assets/images/entity/png/people/oman.png to /assets/images/entity/png/people/320902198206010013.png POST
2021/01/15 07:22:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:47 [I] fs.go 38: Write file (attr) /assets/images/entity/png/people/woman.png PUT
2021/01/15 07:22:47 [I] fs.go 77: Write attr: {"remark":"","ctime":1610666915218,"author":"admin","icon":"/fs/assets/images/files/png/png.png?type=download&issys=true"}
2021/01/15 07:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:48 [I] fs.go 322: Rename file /assets/images/entity/png/people/woman.png to /assets/images/entity/png/people/32091119710117155X.png POST
2021/01/15 07:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:23:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:24:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:25:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:25:20 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:25:20 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
        return odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v.id
                v._icon = 'people/man';
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:25:21 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:25:21 [I] fs.go 77: Write attr: {}
2021/01/15 07:25:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:25:55 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:25:55 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
        return odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v.id
                v._icon = 'people/man';
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:25:55 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:25:55 [I] fs.go 77: Write attr: {}
2021/01/15 07:26:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:27:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:27:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:28:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:11 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:29:11 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v.id
                v._icon = 'people/man';
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:29:11 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:29:11 [I] fs.go 77: Write attr: {}
2021/01/15 07:29:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:42 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:29:42 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
               
                v._icon = 'people/'+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:29:42 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:29:42 [I] fs.go 77: Write attr: {}
2021/01/15 07:29:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:29:48 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:29:48 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/'+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:29:48 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:29:48 [I] fs.go 77: Write attr: {}
2021/01/15 07:30:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:10 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:30:10 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:30:11 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:30:11 [I] fs.go 77: Write attr: {}
2021/01/15 07:30:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:30:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:31:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:31:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:31:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:15 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:32:15 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();

log.info("=======input=========="+input);
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:32:15 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:32:15 [I] fs.go 77: Write attr: {}
2021/01/15 07:32:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:32:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:31 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:33:31 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:33:31 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:33:31 [I] fs.go 77: Write attr: {}
2021/01/15 07:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:33:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:33 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 07:34:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:45 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:34:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:45 [I] home.go 65: Go to user home page: /home
2021/01/15 07:34:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:34:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:36:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:37:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:37:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:02 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:38:02 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
       return  _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:38:03 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:38:03 [I] fs.go 77: Write attr: {}
2021/01/15 07:38:03 [E] batch.go 73: cql =[INSERT INTO object JSON ? DEFAULT UNSET], params=[[{"_tokens":{"_fields":"\u00002020-11-07 09:15:18\u0000js\u00002021-01-14 23:38:02\u0000/script/matrix/graph/graph_service.js\u00002021-01-15\u0000graph_service.js\u0000/matrix/filesystem\u0000/script/matrix/graph\u00001610667483772\u0000{}\u000015590211842812583004\u00000","_raw":""},"class":"/matrix/filesystem","day":"2021-01-15","id":"15590211842812583004","list_bigint_0":[5493766352063334606],"list_bigint_1":[],"map_varchar_set_0":null,"map_varchar_set_1":null,"map_varchar_set_10":null,"map_varchar_set_11":null,"map_varchar_set_12":null,"map_varchar_set_13":null,"map_varchar_set_14":null,"map_varchar_set_15":null,"map_varchar_set_16":null,"map_varchar_set_19":null,"map_varchar_set_2":null,"map_varchar_set_20":null,"map_varchar_set_21":null,"map_varchar_set_22":null,"map_varchar_set_23":null,"map_varchar_set_24":null,"map_varchar_set_25":null,"map_varchar_set_3":null,"map_varchar_set_4":null,"map_varchar_set_5":null,"map_varchar_set_6":null,"map_varchar_set_7":null,"map_varchar_set_8":null,"map_varchar_set_9":null,"name":"graph_service.js","smallint_0":0,"tags":[],"timestamp_2":"2021-01-14T23:38:02.9Z","timestamp_3":"2020-11-07T09:15:18.336Z","varchar_19":"/script/matrix/graph","varchar_2":"","varchar_20":"/script/matrix/graph/graph_service.js","varchar_33":"js","varchar_34":"{}","varchar_394":null,"varchar_396":null,"vtime":1610667483772}]], err=[Error decoding JSON value for timestamp_2: Unable to coerce '2021-01-14T23:38:02.9Z' to a formatted date (long)]
2021/01/15 07:38:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:51 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 07:38:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:38:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [I] home.go 65: Go to user home page: /home
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:39:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:41:35 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:41:35 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
    rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:41:35 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:41:35 [I] fs.go 77: Write attr: {}
2021/01/15 07:43:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:43:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:44:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:30 [E] search.go 23: search: #/matrix/system/probe/: | top 50, err: runtime error: invalid memory address or nil pointer dereference
2021/01/15 07:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:30 [I] wjs.go 145: /matrix/probe/getProbeList.js:51:9:  #/matrix/system/hostinfo: |  top 50 | sort by host
2021/01/15 07:45:30 [E] resp.go 33: json: unsupported value: NaN
2021/01/15 07:45:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:33 [I] wjs.go 145: /matrix/depot/getServerList.js:56:9:  #/matrix/system/hostinfo | print host,depot,config,id,iszabbix,iplist | top 50
2021/01/15 07:45:33 [I] wjs.go 145: /matrix/depot/getServerList.js:64:9:  [map[config:map[cpu_usedpercent:4.14 disk_free:465915551744 disk_total:528302661632 disk_used:40466857984 disk_usedpercent:7.99 host:dsjys-01.novalocal matrixroot:/opt/matrix memory_usedpercent:55.98 os:linux pid:23236] depot:map[] host:dsjys-01.novalocal id:3129652447370662468 iplist:[10.10.27.20] iszabbix:0]]
2021/01/15 07:45:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:34 [I] wjs.go 145: /matrix/depot/getScriptList.js:39:9:  #/matrix/system/depot: |  sort by vtime desc | top 50
2021/01/15 07:45:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:45:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:46:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:47:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:47:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:47:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:47:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:37 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:48:37 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
    rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:48:37 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:48:37 [I] fs.go 77: Write attr: {}
2021/01/15 07:48:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:06 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 07:49:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:18 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:49:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:18 [I] home.go 65: Go to user home page: /home
2021/01/15 07:49:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:49:58 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:49:58 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:49:58 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:49:58 [I] fs.go 77: Write attr: {}
2021/01/15 07:50:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:00 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:50:00 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:50:00 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:50:00 [I] fs.go 77: Write attr: {}
2021/01/15 07:50:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:02 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:50:02 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:50:02 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:50:02 [I] fs.go 77: Write attr: {}
2021/01/15 07:50:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:40 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:50:40 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:50:40 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:50:40 [I] fs.go 77: Write attr: {}
2021/01/15 07:50:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:50:56 [W] auth.go 103: Company name not found. Request /script/exec/js?input=%E8%92%8B%E4%B8%89&isfile=true
2021/01/15 07:50:56 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 07:51:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [I] home.go 65: Go to user home page: /home
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:38 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:51:38 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon == 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:51:38 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:51:38 [I] fs.go 77: Write attr: {}
2021/01/15 07:51:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:51:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:01 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 07:52:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:09 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 07:52:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:09 [I] home.go 65: Go to user home page: /home
2021/01/15 07:52:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:32 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:52:32 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}



var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:52:32 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:52:32 [I] fs.go 77: Write attr: {}
2021/01/15 07:52:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:52:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:53:55 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 07:53:55 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/man';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 07:53:55 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 07:53:55 [I] fs.go 77: Write attr: {}
2021/01/15 07:54:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 07:54:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:21:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:34 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 08:22:34 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 08:22:34 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 08:22:34 [I] fs.go 77: Write attr: {}
2021/01/15 08:22:43 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 08:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [I] home.go 65: Go to user home page: /home
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:23:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:31 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 08:24:31 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 08:24:31 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 08:24:31 [I] fs.go 77: Write attr: {}
2021/01/15 08:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:24:45 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 08:24:45 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        dfs.write(hisFile,JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 08:24:45 [I] dfs_index.go 152: Index file /script/matrix/graph/graph_service.js
2021/01/15 08:24:45 [I] fs.go 77: Write attr: {}
2021/01/15 08:24:56 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 08:25:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:04 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 08:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:04 [I] home.go 65: Go to user home page: /home
2021/01/15 08:25:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:25:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:26:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:32:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:35:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:01 [I] fs.go 287: Upload file /assets/images/entity/png/mobile.png POST
2021/01/15 08:41:01 [I] fs.go 292: Upload file /assets/images/entity/png/mobile.png finished.
2021/01/15 08:41:01 [W] fs.go 816: Index file error: unsupported index type
2021/01/15 08:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:41:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:42:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:44:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:46:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:46:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:46:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:48:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:51:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:51:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:54:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:54:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:54:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:54:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:54:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:57:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 08:59:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:00:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:02:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:02:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:03:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:04:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:05:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:07:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:07:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:07:58 [I] cache.go 348: Refresh cache {class}...
2021/01/15 09:07:58 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 09:07:58 [I] cache.go 480: ------Finish Cache------
2021/01/15 09:07:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:07:59 [I] util.go 276: Send schema change notify, cache type: class, change value: int_4_256_879577457
2021/01/15 09:08:00 [I] util.go 209: Receive schema change notify.
2021/01/15 09:08:00 [I] util.go 209: Receive schema change notify.
2021/01/15 09:08:00 [I] util.go 209: Receive schema change notify.
2021/01/15 09:08:00 [I] util.go 219: Refresh cache type: class
2021/01/15 09:08:00 [I] cache.go 348: Refresh cache {class}...
2021/01/15 09:08:00 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 09:08:00 [I] util.go 219: Refresh cache type: class
2021/01/15 09:08:00 [I] cache.go 348: Refresh cache {class}...
2021/01/15 09:08:00 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 09:08:00 [I] util.go 219: Refresh cache type: class
2021/01/15 09:08:00 [I] util.go 231:  is self, skip, don't refresh .
2021/01/15 09:08:00 [I] cache.go 480: ------Finish Cache------
2021/01/15 09:08:00 [I] cache.go 480: ------Finish Cache------
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:08:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:09:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:09:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:09:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:09:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:09:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:10:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:11:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:12:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:13:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:14:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:42 [I] fs.go 38: Write file (attr) /assets/images/entity/png/call.png PUT
2021/01/15 09:15:42 [I] fs.go 77: Write attr: {"remark":"","ctime":1610673689749,"author":"admin","icon":"/fs/assets/images/files/png/png.png?type=download&issys=true"}
2021/01/15 09:15:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:42 [I] fs.go 322: Rename file /assets/images/entity/png/call.png to /assets/images/entity/png/calllog.png POST
2021/01/15 09:15:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:16:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:16:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:16:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:20:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:34:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:34:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:52 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 09:59:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:52 [I] home.go 65: Go to user home page: /home
2021/01/15 09:59:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 09:59:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:00:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:08:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:08:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:08:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:08:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:14 [I] fs.go 355: Export file /app POST
2021/01/15 10:09:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:24 [I] fs.go 355: Export file /assets POST
2021/01/15 10:09:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:30 [I] fs.go 355: Export file /etc POST
2021/01/15 10:09:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:36 [I] fs.go 355: Export file /home POST
2021/01/15 10:09:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:43 [I] fs.go 355: Export file /opt POST
2021/01/15 10:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:09:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:10:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 10:10:21 [I] fs.go 355: Export file /script POST
2021/01/15 10:10:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:18:11 [I] wnats.go 39: Nats servers: nats://user:user@10.10.27.20:4222
2021/01/15 13:18:11 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 13:18:11 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:18:11 [I] cache.go 351: Refresh cache: Ftypes.
2021/01/15 13:18:11 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:18:11 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:18:11 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:18:12 [I] modb.go 38: Modb debug start.
2021/01/15 13:18:15 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:18:15 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:18:15 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:18:15 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:18:15 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:18:15 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:18:15 [I] util.go 203: Start schema change receiver.
2021/01/15 13:18:15 [I] setting.go 205: Load config from etcd: /matrix/etc/web/app.ini
2021/01/15 13:18:15 [I] setting.go 221: Matrix: Portal Service
2021/01/15 13:18:15 [I] setting.go 326: User login type: local
2021/01/15 13:18:15 [I] setting.go 542: Cache Service Enabled
2021/01/15 13:18:15 [I] setting.go 554: Session Service Enabled
2021/01/15 13:18:15 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: hdim
2021/01/15 13:18:15 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:18:15 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:18:16 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:18:16 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:18:19 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:18:19 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:18:19 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:18:19 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:18:19 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:18:19 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:18:19 [I] util.go 203: Start schema change receiver.
2021/01/15 13:18:20 [I] install.go 143: Init 'hdim' dfs file /app to local ok. [0.1s]
2021/01/15 13:18:27 [I] install.go 149: Init 'hdim' dfs file /script to cache ok. [7.7s]
2021/01/15 13:18:27 [I] install.go 143: Init 'matrix' dfs file /app to local ok. [0.2s]
2021/01/15 13:18:35 [I] install.go 149: Init 'matrix' dfs file /script to cache ok. [7.0s]
2021/01/15 13:18:35 [I] install.go 37: Run Mode: Development
2021/01/15 13:18:35 [I] install.go 99: git version 2.26.2
2021/01/15 13:18:35 [I] stats.go 111: Stats get lock.
2021/01/15 13:18:35 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/depot.git
2021/01/15 13:18:35 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/dfs.git
2021/01/15 13:18:39 [I] install.go 214: Init 'hdim' nlp robot ok
2021/01/15 13:18:39 [I] install.go 219: Cacche 'hdim' app perms ok
2021/01/15 13:18:39 [I] install.go 224: Cacche 'hdim' ui perms ok
2021/01/15 13:18:39 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/depot.git
2021/01/15 13:18:39 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/dfs.git
2021/01/15 13:18:42 [I] install.go 214: Init 'matrix' nlp robot ok
2021/01/15 13:18:42 [I] install.go 219: Cacche 'matrix' app perms ok
2021/01/15 13:18:43 [I] install.go 224: Cacche 'matrix' ui perms ok
2021/01/15 13:18:43 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 13:18:43 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:18:43 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:18:43 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:18:43 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:18:46 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:18:46 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:18:46 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:18:46 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:18:46 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:18:46 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:18:46 [I] util.go 203: Start schema change receiver.
2021/01/15 13:18:46 [I] web.go 622: Listen: http://10.10.27.20:8080
2021/01/15 13:18:46 [I] web.go 623: Login mode: local
2021/01/15 13:19:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:19:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:19:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:19:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:02 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 13:20:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:02 [I] home.go 65: Go to user home page: /home
2021/01/15 13:20:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:530055298786
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:524859199265
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============accommodation
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============accommodation:广西锦江之星市区店2019-11-11
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============trainrecord
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============trainrecord:G125K_4_78910_2019-09-10
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:王冬梅
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:9070370018534028
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:20:48 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:6334613290703028
2021/01/15 13:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============phonenumber
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============phonenumber:18662077819
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============perbasisinfo
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============perbasisinfo:32091119650304345X
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============otherpayrecord
2021/01/15 13:20:54 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============otherpayrecord:微信:18662077819
2021/01/15 13:20:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:20:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============otherpayrecord
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============otherpayrecord:微信:18662077819
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============phonenumber
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============phonenumber:18662077819
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============perbasisinfo
2021/01/15 13:21:12 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============perbasisinfo:32091119650304345X
2021/01/15 13:21:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:52 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============trainrecord
2021/01/15 13:21:52 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============trainrecord:G125K_4_78910_2019-09-10
2021/01/15 13:21:52 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:21:52 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:21:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:21:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:22:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:36 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 13:23:36 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 13:23:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:36 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 13:23:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:王冬梅
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============accommodation
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============accommodation:广西锦江之星市区店2019-11-11
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============trainrecord
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============trainrecord:G125K_4_78910_2019-09-10
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:9070370018534028
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:6334613290703028
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:530055298786
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:23:53 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:524859199265
2021/01/15 13:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:23:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:24:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:35 [I] fs.go 287: Upload file /etc/global/global.json POST
2021/01/15 13:25:36 [I] fs.go 292: Upload file /etc/global/global.json finished.
2021/01/15 13:25:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:39 [I] fs.go 865: New 'hdim' dfs index.
2021/01/15 13:25:41 [I] dfs_index.go 152: Index file /etc/global/global.json
2021/01/15 13:25:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:25:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:49 [I] fs.go 287: Upload file /home/admin/etc/global/global.json POST
2021/01/15 13:26:50 [I] fs.go 292: Upload file /home/admin/etc/global/global.json finished.
2021/01/15 13:26:50 [I] dfs_index.go 152: Index file /home/admin/etc/global/global.json
2021/01/15 13:26:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:03 [I] fs.go 287: Upload file /home/huidutech/etc/global/global.json POST
2021/01/15 13:27:04 [I] fs.go 292: Upload file /home/huidutech/etc/global/global.json finished.
2021/01/15 13:27:04 [I] dfs_index.go 152: Index file /home/huidutech/etc/global/global.json
2021/01/15 13:27:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:27:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:28:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:28:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:28:31 [I] fs.go 459: Import file 47.92.151.165_8080_matrix_matrix_2021-01-15 01_33_54.zip POST
2021/01/15 13:28:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:王冬梅
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============accommodation
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============accommodation:广西锦江之星市区店2019-11-11
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============trainrecord
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============trainrecord:G125K_4_78910_2019-09-10
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:9070370018534028
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:6334613290703028
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:530055298786
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:524859199265
2021/01/15 13:29:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:20 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 13:29:20 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 13:29:20 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 13:29:20 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 13:29:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:9070370018534028
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:6334613290703028
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:530055298786
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:29:26 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:524859199265
2021/01/15 13:29:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:29:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:10 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 13:30:10 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'people'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 13:30:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:10 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 13:30:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============caserecord
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============caserecord:王德林
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============caserecord
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============caserecord:卞卫军
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============reportrecord
2021/01/15 13:30:13 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============reportrecord:都公110
2021/01/15 13:30:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:530055298786
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:524859199265
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:9070370018534028
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============bankaccount
2021/01/15 13:30:17 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============bankaccount:6334613290703028
2021/01/15 13:30:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:33 [I] home.go 65: Go to user home page: /home
2021/01/15 13:30:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:30:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============caserecord
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============caserecord:卞卫军
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============reportrecord
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============reportrecord:都公110
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============caserecord
2021/01/15 13:32:52 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============caserecord:王德林
2021/01/15 13:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:32:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:33:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:34:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:34:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:35:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:35:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:36:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:36:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:37:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:37:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:38:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:38:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:39:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:39:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:40:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:40:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:41:29 [I] wnats.go 39: Nats servers: nats://user:user@10.10.27.20:4222
2021/01/15 13:41:29 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 13:41:29 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:41:29 [I] cache.go 351: Refresh cache: Ftypes.
2021/01/15 13:41:29 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:41:29 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:41:29 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:41:30 [I] modb.go 38: Modb debug start.
2021/01/15 13:41:33 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:41:33 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:41:33 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:41:33 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:41:33 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:41:33 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:41:33 [I] util.go 203: Start schema change receiver.
2021/01/15 13:41:33 [I] setting.go 205: Load config from etcd: /matrix/etc/web/app.ini
2021/01/15 13:41:33 [I] setting.go 221: Matrix: Portal Service
2021/01/15 13:41:33 [I] setting.go 326: User login type: local
2021/01/15 13:41:33 [I] setting.go 542: Cache Service Enabled
2021/01/15 13:41:33 [I] setting.go 554: Session Service Enabled
2021/01/15 13:41:33 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: hdim
2021/01/15 13:41:33 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:41:33 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:41:33 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:41:33 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:41:36 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:41:36 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:41:36 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:41:36 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:41:36 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:41:36 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:41:36 [I] util.go 203: Start schema change receiver.
2021/01/15 13:41:36 [I] install.go 143: Init 'hdim' dfs file /app to local ok. [0.1s]
2021/01/15 13:41:45 [I] install.go 149: Init 'hdim' dfs file /script to cache ok. [8.9s]
2021/01/15 13:41:45 [I] install.go 143: Init 'matrix' dfs file /app to local ok. [0.0s]
2021/01/15 13:41:52 [I] install.go 149: Init 'matrix' dfs file /script to cache ok. [6.5s]
2021/01/15 13:41:52 [I] install.go 37: Run Mode: Development
2021/01/15 13:41:52 [I] install.go 99: git version 2.26.2
2021/01/15 13:41:52 [I] stats.go 111: Stats get lock.
2021/01/15 13:41:52 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/depot.git
2021/01/15 13:41:52 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/dfs.git
2021/01/15 13:41:55 [I] install.go 214: Init 'hdim' nlp robot ok
2021/01/15 13:41:55 [I] install.go 219: Cacche 'hdim' app perms ok
2021/01/15 13:41:55 [I] install.go 224: Cacche 'hdim' ui perms ok
2021/01/15 13:41:55 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/depot.git
2021/01/15 13:41:55 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/dfs.git
2021/01/15 13:41:59 [I] install.go 214: Init 'matrix' nlp robot ok
2021/01/15 13:41:59 [I] install.go 219: Cacche 'matrix' app perms ok
2021/01/15 13:41:59 [I] install.go 224: Cacche 'matrix' ui perms ok
2021/01/15 13:41:59 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 13:41:59 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 13:41:59 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 13:41:59 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 13:41:59 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 13:42:03 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 13:42:03 [I] cache.go 410: Refresh cache: enum.
2021/01/15 13:42:03 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 13:42:03 [I] cache.go 440: Refresh cache: relations.
2021/01/15 13:42:03 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 13:42:03 [I] cache.go 480: ------Finish Cache------
2021/01/15 13:42:03 [I] util.go 203: Start schema change receiver.
2021/01/15 13:42:03 [I] web.go 622: Listen: http://10.10.27.20:8080
2021/01/15 13:42:03 [I] web.go 623: Login mode: local
2021/01/15 13:42:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:42:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:42:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:42:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:42:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:07 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 13:43:07 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 13:43:07 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 13:43:07 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 13:43:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:37 [I] home.go 65: Go to user home page: /home
2021/01/15 13:43:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:48 [I] home.go 65: Go to user home page: /home
2021/01/15 13:43:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:43:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:03 [I] home.go 65: Go to user home page: /home
2021/01/15 13:44:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 13:44:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:27 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 14:36:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:27 [I] home.go 65: Go to user home page: /home
2021/01/15 14:36:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 14:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 15:16:21 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 15:16:21 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 15:16:21 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:16:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:14 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 15:17:14 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:王冬梅
2021/01/15 15:17:14 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============people
2021/01/15 15:17:14 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============people:蒋三
2021/01/15 15:17:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:32 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 15:17:32 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 15:17:32 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 15:17:32 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 15:17:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:17:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:51 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:18:51 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:18:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:18:51 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:19:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============perbasisinfo
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============perbasisinfo:320911196010191235
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============intimaterecord
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============intimaterecord:邻居:高正旺
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============intimaterecord
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============intimaterecord:其他亲属:范国祥
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:128:13:  =============v._icon=============intimaterecord
2021/01/15 15:19:56 [I] wjs.go 145: /matrix/graph/graph_service.js:129:13:  =============v.id=============intimaterecord:其他亲属:范国恒
2021/01/15 15:19:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:20:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:21:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:24 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:23:24 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){
            log.info("=============v._icon============="+v._icon);
            log.info("=============v.id============="+v.id);
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon)
             dfs.write("/script/matrix/graph/log.log","=============v.id============="+ v.id)
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:23:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:24 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:27 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:23:27 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon)
             dfs.write("/script/matrix/graph/log.log","=============v.id============="+ v.id)
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:27 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:23:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:51 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:23:51 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon)
             dfs.write("/script/matrix/graph/log.log","=============v.id============="+ v.id)
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:23:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:51 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:23:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:23:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:24:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:13 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:25:13 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon)
             dfs.write("/script/matrix/graph/log.log","=============v.id============="+ v.card)
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:25:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:13 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:25:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:25:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:43 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:26:43 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/320911197004200910';
                //+getPeopleEntity(v.id);
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:26:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:43 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:26:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:27:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:27:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:28:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:44 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:44 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {cardid}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:48 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {cardid}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:48 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:52 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {cardid}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:52 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:29:55 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:29:55 [I] cypher_ternary.go 1187: [NotExist]: Not Found Class For ID {cardid}
"[NotExist]" backtrace:
git.wecise.com/wecise/platform/odb.(*Gutil).FindClassFromID:query_util.go:904
git.wecise.com/wecise/platform/odb.(*Gutil).GetClassFromID:query_util.go:852
git.wecise.com/wecise/platform/odb.(*Gutil).NewBean:cypher_tgraph.go:381
git.wecise.com/wecise/platform/odb.(*CTernary).GetObjectQuadWithClass.func1:cypher_ternary.go:1186
runtime.goexit:asm_amd64.s:1375
2021/01/15 15:30:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:34 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:30:34 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id);
                //;
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:30:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:34 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:30:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:37 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:30:37 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id); 
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:30:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:30:37 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:32:48 [W] auth.go 103: Company name not found. Request /fs/script/matrix/graph/graph_service.js?issys=true
2021/01/15 15:32:56 [W] auth.go 103: Company name not found. Request /fs/script/matrix/graph/graph_service.js?issys=true
2021/01/15 15:33:10 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E6%81%92&isfile=true
2021/01/15 15:33:10 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:12 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E6%81%92&isfile=true
2021/01/15 15:33:12 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:14 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E6%81%92&isfile=true
2021/01/15 15:33:14 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:15 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E6%81%92&isfile=true
2021/01/15 15:33:15 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:19 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E7%A5%A5&isfile=true
2021/01/15 15:33:19 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:20 [W] auth.go 103: Company name not found. Request /script/exec/js?input=intimaterecord%3A%E5%85%B6%E4%BB%96%E4%BA%B2%E5%B1%9E%3A%E8%8C%83%E5%9B%BD%E7%A5%A5&isfile=true
2021/01/15 15:33:20 [W] auth.go 103: Company name not found. Request /script/exec/js?input=null&isfile=true
2021/01/15 15:33:23 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:48 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 15:33:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:48 [I] home.go 65: Go to user home page: /home
2021/01/15 15:33:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:33:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 15:34:31 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 15:34:31 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 15:34:31 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:34:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:43:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:44:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:01 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:45:01 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:45:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:01 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:45:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:16 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:45:16 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v.1111111============="+v._icon) 
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:45:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:16 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:45:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:45:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:40 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:49:40 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v.1111111============="+v._icon) 
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:49:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:41 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:49:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:49:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:50:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:50:41 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:50:41 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
            dfs.write("/script/matrix/graph/log.log", "=============ids============="+ids) 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){ 
            dfs.write("/script/matrix/graph/log.log", "=============v._icon============="+v._icon) 
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v.1111111============="+v._icon) 
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:50:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:50:41 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:51:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:07 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:51:07 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
            dfs.write("/script/matrix/graph/log.log", "=============ids============="+ids) 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v.1111111============="+v._icon) 
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:51:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:08 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:59 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:51:59 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
            dfs.write("/script/matrix/graph/log.log", "=============ids============="+ids) 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v._id============="+v._id) 
                v._icon = 'people/'+getPeopleEntity(v.id); 
                 dfs.write("/script/matrix/graph/log.log", "=============v._card============="+v._card) 
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:51:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:51:59 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:52:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:03 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:52:03 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try {
            dfs.write("/script/matrix/graph/log.log", "=============ids============="+ids) 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id in " + ids + " limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v._id============="+v._id) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:52:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:04 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:52:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:50 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:52:50 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
         dfs.write("/script/matrix/graph/log.log", "=============v.rtn============="+rtn) 
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                  dfs.write("/script/matrix/graph/log.log", "=============v._id============="+v._id) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:52:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:50 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:52:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:52:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:39 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:53:39 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                dfs.write("/script/matrix/graph/log.log", "=============v.card============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:53:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:39 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:53:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:53:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:13 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:54:13 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:54:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:14 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:54:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:56 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:54:56 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:54:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:54:56 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:55:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:03 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:55:03 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:55:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:04 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:55:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:34 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 15:55:34 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
             
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 15:55:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:34 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 15:55:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:55:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:56:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 15:57:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:07 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 16:04:07 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 16:04:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:07 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 16:04:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:04:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:05:10 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 16:05:10 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取任务实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取任务实体的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'caserecord'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getCaseEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 16:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:05:10 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 16:05:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:05:25 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 16:05:25 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'caserecord'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getCaseEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 16:05:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:05:25 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 16:06:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:02 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 16:06:02 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'caserecord'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getCaseEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 16:06:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:03 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 16:06:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:16 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 16:06:16 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'caserecord'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getCaseEntity(v.id)) 
                v._icon = 'people/'+getCaseEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 16:06:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:16 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 16:06:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:06:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:07:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:07:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:07:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:07:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:21 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 16:18:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:21 [I] home.go 65: Go to user home page: /home
2021/01/15 16:18:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:18:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:02 [I] home.go 65: Go to user home page: /home
2021/01/15 16:19:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 16:19:12 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 16:19:12 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 16:19:12 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:19:58 [I] wnats.go 39: Nats servers: nats://user:user@10.10.27.20:4222
2021/01/15 16:19:59 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 16:19:59 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 16:19:59 [I] cache.go 351: Refresh cache: Ftypes.
2021/01/15 16:19:59 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 16:19:59 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 16:19:59 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 16:19:59 [I] modb.go 38: Modb debug start.
2021/01/15 16:20:02 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 16:20:02 [I] cache.go 410: Refresh cache: enum.
2021/01/15 16:20:02 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 16:20:02 [I] cache.go 440: Refresh cache: relations.
2021/01/15 16:20:02 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 16:20:02 [I] cache.go 480: ------Finish Cache------
2021/01/15 16:20:02 [I] util.go 203: Start schema change receiver.
2021/01/15 16:20:02 [I] setting.go 205: Load config from etcd: /matrix/etc/web/app.ini
2021/01/15 16:20:02 [I] setting.go 221: Matrix: Portal Service
2021/01/15 16:20:02 [I] setting.go 326: User login type: local
2021/01/15 16:20:02 [I] setting.go 542: Cache Service Enabled
2021/01/15 16:20:02 [I] setting.go 554: Session Service Enabled
2021/01/15 16:20:02 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: hdim
2021/01/15 16:20:02 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 16:20:02 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 16:20:02 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 16:20:02 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 16:20:06 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 16:20:06 [I] cache.go 410: Refresh cache: enum.
2021/01/15 16:20:06 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 16:20:06 [I] cache.go 440: Refresh cache: relations.
2021/01/15 16:20:06 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 16:20:06 [I] cache.go 480: ------Finish Cache------
2021/01/15 16:20:06 [I] util.go 203: Start schema change receiver.
2021/01/15 16:20:06 [I] install.go 143: Init 'hdim' dfs file /app to local ok. [0.1s]
2021/01/15 16:20:15 [I] install.go 149: Init 'hdim' dfs file /script to cache ok. [9.1s]
2021/01/15 16:20:15 [I] install.go 143: Init 'matrix' dfs file /app to local ok. [0.0s]
2021/01/15 16:20:22 [I] install.go 149: Init 'matrix' dfs file /script to cache ok. [6.7s]
2021/01/15 16:20:22 [I] install.go 37: Run Mode: Development
2021/01/15 16:20:22 [I] install.go 99: git version 2.26.2
2021/01/15 16:20:22 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/depot.git
2021/01/15 16:20:22 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/hdim/dfs.git
2021/01/15 16:20:22 [I] stats.go 111: Stats get lock.
2021/01/15 16:20:25 [I] install.go 214: Init 'hdim' nlp robot ok
2021/01/15 16:20:25 [I] install.go 219: Cacche 'hdim' app perms ok
2021/01/15 16:20:25 [I] install.go 224: Cacche 'hdim' ui perms ok
2021/01/15 16:20:25 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/depot.git
2021/01/15 16:20:25 [I] repo.go 120: Repository path: /opt/matrix/web/repositories/matrix/dfs.git
2021/01/15 16:20:28 [I] install.go 214: Init 'matrix' nlp robot ok
2021/01/15 16:20:28 [I] install.go 219: Cacche 'matrix' app perms ok
2021/01/15 16:20:28 [I] install.go 224: Cacche 'matrix' ui perms ok
2021/01/15 16:20:28 [I] wcsdr.go 52: Cassandra servers: 10.10.27.20. Keyspace: matrix
2021/01/15 16:20:28 [I] cache.go 348: Refresh cache {all,trigger,field,class,index,rels,bulk,tsdb,bitlog,fsindex}...
2021/01/15 16:20:28 [I] cache.go 369: Refresh cache: DateFields, AllFields, LoptionFields, Fields.
2021/01/15 16:20:28 [I] cache.go 379: Refresh cache: tsdb.
2021/01/15 16:20:28 [I] cache.go 389: Refresh cache: bitlog.
2021/01/15 16:20:32 [I] cache.go 399: Refresh cache: Classes, ClassFields, ClassTTL.
2021/01/15 16:20:32 [I] cache.go 410: Refresh cache: enum.
2021/01/15 16:20:32 [I] cache.go 420: Refresh cache: CacheIndex.
2021/01/15 16:20:32 [I] cache.go 440: Refresh cache: relations.
2021/01/15 16:20:32 [I] cache.go 457: Refresh cache: FieldCap.
2021/01/15 16:20:32 [I] cache.go 480: ------Finish Cache------
2021/01/15 16:20:32 [I] util.go 203: Start schema change receiver.
2021/01/15 16:20:32 [I] web.go 622: Listen: http://10.10.27.20:8080
2021/01/15 16:20:32 [I] web.go 623: Login mode: local
2021/01/15 16:20:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:40 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:21:40 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            if(v.class === '/matrix/entity/people'){
                _.extend(v, { icon: 'people/man' });        
            } else {
                _.extend(v, { icon: icon });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:21:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:40 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:21:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:21:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:48 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:22:48 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/people'){
                _.extend(v, { icon: 'people/man' });        
            } else {
                _.extend(v, { icon: icon });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:22:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:22:48 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:22:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:22 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:23:22 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/man' });        
            } else {
                _.extend(v, { icon: icon });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:23:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:22 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:23:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:23:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:16 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:24:16 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/man' });        
            } else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:24:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:16 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:24:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:24:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:25:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:25:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:27 [I] fs.go 38: Write file (dir) /assets/images/entity/png/新文件夹_1610699534107 PUT
2021/01/15 16:26:28 [I] fs.go 77: Write attr: {"remark":"","ctime":1610699534107,"author":"admin"}
2021/01/15 16:26:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:39 [I] fs.go 322: Rename file /assets/images/entity/png/新文件夹_1610699534107 to /assets/images/entity/png/people POST
2021/01/15 16:26:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:26:51 [I] fs.go 322: Rename file /assets/images/entity/png/新文件夹_1610699534107 to /assets/images/entity/png/people POST
2021/01/15 16:26:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:11 [I] fs.go 207: Delete file /assets/images/entity/png/新文件夹_1610699534107 DELETE
2021/01/15 16:27:13 [I] fs.go 865: New 'hdim' dfs index.
2021/01/15 16:27:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:29 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:27:29 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            } else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:27:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:29 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:27:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:30 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 16:27:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:30 [I] home.go 65: Go to user home page: /home
2021/01/15 16:27:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:27:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:29:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:29:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:29:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:30:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:31:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:33:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:34:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:34:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:01 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:35:01 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            } else {
                _.extend(v, { icon: v.class });
            }
            
            
             if(v.class === 'perbasisinfo'){ 
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:35:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:01 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:35:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:15 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:35:15 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:35:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:15 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:35:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:33 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:35:33 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:35:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:33 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:35:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:06 [W] auth.go 103: Company name not found. Request /script/exec/js?input=320911197004200910&isfile=true
2021/01/15 16:36:06 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:17 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 16:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:17 [I] home.go 65: Go to user home page: /home
2021/01/15 16:36:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:36:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:37:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:49 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 16:38:49 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 16:38:49 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 16:38:49 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 16:38:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:38:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:39:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:40:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:41:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:42:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:42:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:43:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:43:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:44:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:44:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:45:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:45:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:46:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:46:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:47:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 16:48:05 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 16:48:05 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 16:48:05 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:48:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:49:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:49:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:24 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:50:24 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                   dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id))
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:50:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:24 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:50:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:59 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:50:59 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                   dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.id))
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:50:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:50:59 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:51:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:51:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:52:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:39 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:53:39 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.id))
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                   dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.id))
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:53:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:39 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:53:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:47 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:53:47 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.class))
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){ 
                   dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.id))
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:53:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:48 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:53:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:53:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:45 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:54:45 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页============="+getPeopleEntity(v.class))
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:54:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:45 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:54:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:52 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:54:52 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页  v.class============="+getPeopleEntity(v.class))
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:54:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:52 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:54:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:54:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:43 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:55:43 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页  v.class============="+getPeopleEntity(v.class))
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
           
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:55:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:43 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:55:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:55:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:56:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:56:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:56:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:56:59 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:56:59 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
             dfs.write("/script/matrix/graph/log.log", "=============首页  v.class============="+v.class)
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
           
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:56:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:56:59 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:57:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:50 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:57:50 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.class============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:57:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:50 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:57:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:55 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:57:55 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:57:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:57:55 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:58:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:24 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 16:58:24 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 16:58:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:24 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 16:58:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:58:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:59:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:59:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:59:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:59:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 16:59:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:24 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:28:24 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:28:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:24 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:28:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:30 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 17:29:30 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 17:29:30 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 17:29:30 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 17:29:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:29:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:10 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 17:30:10 [W] auth.go 103: Company name not found. Request /script/exec/js?input=320911197004200910&isfile=true
2021/01/15 17:30:13 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 17:30:24 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:39 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 17:30:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:39 [I] home.go 65: Go to user home page: /home
2021/01/15 17:30:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:30:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 17:33:47 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 17:33:47 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:33:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:34:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:51 [I] fs.go 38: Write file (js) /script/matrix/graph/graph_service.js PUT
2021/01/15 17:35:51 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT).trim();
 
var words = [
    '查询所有应用的关联信息',
    '查询应用wecise的关联信息',
    '查询所有业务的关联信息',
    '查询查账系统的关联信息',
    '数字国网的关联信息',
    '运行在linux服务器wecise上的服务',
            'cassandra',
            '集群',
            'DB2',
            'vmware',
            'etcd',
            'HA',
            'http',
            'linux',
            'mysql',
            '队列',
            'oracle',
            'pod',
            '路由器',
            'san存储',
            'san交换机',
            '交换机',
            'tomcat',
            'weblogic'
];
var syntax = [
    'match ("app:*") <- [*1]-()',
    'match ("app:web_wecise") - [*1]->()',
    'match ("biz:*") - [*1]->()',
    'match ("biz:查账系统") - [*1]->()',
    'match ("biz:数字国网") - [*1]->()',
    'match ()-[*]->("linux:wecise")',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取实体信息
var getEntity = function(ids){
    
    try {
        return odb.mql("select id,class,name from /matrix/entity/ where id in " + ids + " limit -1").data;
    } catch(err){
        return []
    }
}


// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

var bak = (function(){
    var template = [{
                  "graph": {
                    "nodes": [],
                    "edges": [],
                    "paths": null,
                    "diff": null,
                    "pathtags": null
                  }
                }];
    try{
        var tmp = input.slice(input.indexOf("(")+1,input.indexOf(")")).replace(/"/g,"").split(",");
        var nodes = getEntity("('"+tmp.join("','")+"')");
        
        return  [{graph:_.extend(template[0].graph, {nodes:_.map(nodes,function(v){
                    return {_icon: _.last(v.class.split("/")),class: v.class, id: v.id};
                })})}]
    }catch(err){
        return [];
    }
})()


//hashcode
var hashCode = function(str){
    return str.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
}


var s = (function(param){
    var rtn = null;
    try{
        
        var idx = -1;
        
        _.forEach(words,function(v,index){
            if(v.search(input) != -1){
                idx = index;
            }
        })
        
        if(idx == -1){
            rtn = odb.mql(param).data;
        } else {
            rtn = odb.mql(syntax[idx]).data;
        }
        
        // 结果处理
        _.forEach(rtn[0].graph.Nodes,function(v){  
            if(v._icon === 'perbasisinfo'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getPeopleEntity(v.id)) 
                v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            if(v._icon === 'caserecord'){
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity============"+v.card) 
                //dfs.write("/script/matrix/graph/log.log", "=============getPeopleEntity(v.id)============="+getCaseEntity(v.id)) 
                v._icon = 'people/'+getCaseEntity(v.id);  
            }
        })
        
        if(_.isEmpty(rtn)){
            rtn = bak;
        }
    } catch(err){
        rtn = bak;
    } finally{
        // 缓存搜索语句
        var name = hashCode(input);
        var account = webcontext.user();
        var hisFile = "/home/"+account.username + "/Documents/history/graph-match-history.json";
        var tmp = JSON.parse(dfs.read(hisFile)) || [];
        var index = _.findIndex(tmp,{name:name});
        
        // limit 30
        if(tmp.lenght > 20) tmp.slice(1);
        
        if(index === -1){
            tmp.push({name:name,value:input,ctime:_.now()});
        } else {
            tmp = _.reject(tmp,{name:name});
            tmp.push({name:name,value:input,ctime:_.now()});
        }
        //dfs.write(hisFile,JSON.stringify(tmp,null,2))
        log.debug(JSON.stringify(tmp,null,2))
    }
  
    return rtn;
})(input);

OUTPUT = s;
2021/01/15 17:35:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:51 [I] fs.go 590: Sync file to local /script/matrix/graph/graph_service.js POST
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:35:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:16 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:36:16 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
          
             else {
                _.extend(v, { icon: v.class });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:36:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:16 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:35 [W] auth.go 103: Company name not found. Request /script/exec/js?input=320911197004200910&isfile=true
2021/01/15 17:36:35 [W] auth.go 103: Company name not found. Request /matrix/topological
2021/01/15 17:36:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [I] auth.go 133: hdim.admin login success. Redirect to uri: /
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [I] home.go 65: Go to user home page: /home
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:36:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 17:37:43 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 17:37:43 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 17:37:43 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:37:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:49 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:38:49 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
          
             else {
                _.extend(v, { icon: icon });
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:38:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:49 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 17:38:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:38:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:39:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:39:27 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:39:27 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon:icon});
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:39:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:39:27 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 17:39:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:39:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:39:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:40:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:43 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:41:43 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
                    dfs.write("/script/matrix/graph/log.log", "=============首页  v.id============="+ v.id)
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon:icon});
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:41:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:43 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 17:41:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:41:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:42:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:42:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:42:51 [I] fs.go 38: Write file (js) /script/matrix/graph/entity-search-by-term.js PUT
2021/01/15 17:42:51 [I] fs.go 56: Write data: var input = decodeURIComponent(INPUT);

var words = ['应用',
                '业务',
                'cassandra',
                '集群',
                'DB2',
                'vmware',
                'etcd',
                'HA',
                'http',
                'linux',
                'mysql',
                '队列',
                'oracle',
                'pod',
                '路由器',
                'san存储',
                'san交换机',
                '交换机',
                'tomcat',
                'weblogic'
];
var syntax = ['app',
                'biz',
                'cassandra',
                'cluster',
                'db2',
                'esx',
                'etcd',
                'ha',
                'http',
                'linux',
                'mysql',
                'nats',
                'oracle',
                'pod',
                'router',
                'sanstorage',
                'sanswitch',
                'switch',
                'tomcat',
                'weblogic'
];

// 根据ID获取人物实体的相关信息
var getPeopleEntity = function(ids){
    var rtn="";
    try { 
       var peopcard= odb.mql("select id,card from /matrix/entity/perbasisinfo where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(peopcard,'card'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}

// 根据ID获取同案人的相关信息
var getCaseEntity = function(ids){
    var rtn="";
    try { 
       var tacard= odb.mql("select tacardid from  /matrix/entity/caserecord where id = '" + ids + "' limit -1").data;
        rtn= _.filter(_.map(tacard,'tacardid'),null)[0];
        
    } catch(err){
        return []
    }
    return rtn;
}


var search = function(){
    var rtn = null;
    
    try{
        
        var idx = -1;
        _.forEach(words,function(v,index){
            
            if(input.search(v) != -1){
                idx = index;
            }
        })
        
        // 搜索实体
        if(idx == -1){
            rtn = odb.search("#/matrix/entity/ | *" + input + "* | print id, name as value,name as title, id,name,class").data;    
        } else {
            rtn = odb.search("#/matrix/entity/ | " + syntax[idx] + "* | print id, name as value,name as title, id,name,class").data;
        }
        
        // 节点处理
        _.forEach(rtn,function(v){
            var icon = _.last(v.class.split("/"));
            log.debug(v.class)
          
            if(v.class === '/matrix/entity/baseuser'){
                _.extend(v, { icon: 'people/320911197004200910' });        
            }  
            else if(v.class === 'perbasisinfo'){  
                   dfs.write("/script/matrix/graph/log.log", "=============首页  v.id1============="+ v.id)
                  _.extend(v, { icon:'people/'+getPeopleEntity(v.id) }); 
               // v._icon = 'people/'+getPeopleEntity(v.id);  
            }
            else if(v.class === 'caserecord'){ 
                  _.extend(v, { icon:'people/'+getCaseEntity(v.id) }); 
                    dfs.write("/script/matrix/graph/log.log", "=============首页  v.id2============="+ v.id)
              //  v._icon = 'people/'+getCaseEntity(v.id);  
            }
             else {
                _.extend(v, { icon:icon});
            }
            
        })
        
        // 搜索活动
        var actions = odb.search("#/matrix/devops/alert | *" + input + "* | print id, name as value, msg as title, id,name,class").data;
        
        rtn = rtn;//.concat(actions);
        
    }catch(err){
        return []
    }
    
    return rtn;
}


OUTPUT = search();
2021/01/15 17:42:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 17:42:52 [I] fs.go 590: Sync file to local /script/matrix/graph/entity-search-by-term.js POST
2021/01/15 18:08:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:08:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:09:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:10:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:10:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:10:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:11:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:11:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:12:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:12:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:12:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:13:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:14:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:14:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:15:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:16:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:17:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:17:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:17:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:18:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:18:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:19:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:19:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:20:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:20:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:21:49 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:21:49 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:21:49 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:21:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:38 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:22:38 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:22:38 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:22:38 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:22:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:22:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:56 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:23:56 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:23:56 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:23:56 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:23:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:23:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:34 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:24:34 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:24:34 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:24:34 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:24:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:49 [W] query_util.go 869: can't find class for id[hotel:] , search subdix of class!
2021/01/15 18:24:49 [W] query_util.go 869: can't find class for id[gotooutin:] , search subdix of class!
2021/01/15 18:24:49 [W] cypher_util.go 760: gotooutin: not Exist, ignore & continue .
2021/01/15 18:24:49 [W] query_util.go 869: can't find class for id[gotominhangexit:] , search subdix of class!
2021/01/15 18:24:49 [W] cypher_util.go 760: gotominhangexit: not Exist, ignore & continue .
2021/01/15 18:24:49 [W] query_util.go 869: can't find class for id[gotominhangticket:] , search subdix of class!
2021/01/15 18:24:49 [W] cypher_util.go 760: gotominhangticket: not Exist, ignore & continue .
2021/01/15 18:24:49 [W] query_util.go 869: can't find class for id[gotorail:] , search subdix of class!
2021/01/15 18:24:49 [W] cypher_util.go 760: gotorail: not Exist, ignore & continue .
2021/01/15 18:24:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:24:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:25:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:25:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:26:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:26:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:27:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:27:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:21 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:28:21 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:28:21 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:28:21 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:28:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:28:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:29:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:31:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:32:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:33:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:33:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:34:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:34:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:12 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:35:12 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:35:12 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:35:12 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:35:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:35:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:36:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:36:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:37:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:37:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:25 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:38:25 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:38:25 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:38:25 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:38:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:38:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:03 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:39:03 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:39:03 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:39:03 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:39:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:39:56 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:39:56 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:39:56 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:39:56 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:39:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:23 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 18:40:23 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 18:40:23 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 18:40:23 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 18:40:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:40:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:41:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:41:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:42:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:42:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:43:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:44:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:44:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:45:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:45:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:46:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:46:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:47:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:47:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:48:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:48:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:49:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:49:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:50:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:50:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:51:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:52:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:52:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:53:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:53:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:54:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:54:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:55:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:55:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:56:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:57:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:57:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:58:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:59:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 18:59:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:00:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:01:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:01:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:02:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:02:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:03:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:03:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:04:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:04:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:05:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:05:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:06:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:06:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:07:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:07:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:08:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:08:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:09:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:10:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:10:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:11:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:11:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:12:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:12:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:13:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:14:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:14:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:15:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:15:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:16:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:16:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:17:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:17:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:18:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:18:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:19:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:19:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:20:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:20:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:21:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:21:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:22:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:22:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:23:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:23:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:24:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:24:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:25:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:25:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:26:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:26:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:27:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:27:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:33 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:28:33 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:28:33 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:28:33 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:28:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:28:57 [W] query_util.go 869: can't find class for id[hotel:] , search subdix of class!
2021/01/15 19:28:57 [W] query_util.go 869: can't find class for id[gotooutin:] , search subdix of class!
2021/01/15 19:28:57 [W] cypher_util.go 760: gotooutin: not Exist, ignore & continue .
2021/01/15 19:28:57 [W] query_util.go 869: can't find class for id[gotominhangexit:] , search subdix of class!
2021/01/15 19:28:57 [W] cypher_util.go 760: gotominhangexit: not Exist, ignore & continue .
2021/01/15 19:28:57 [W] query_util.go 869: can't find class for id[gotominhangticket:] , search subdix of class!
2021/01/15 19:28:57 [W] cypher_util.go 760: gotominhangticket: not Exist, ignore & continue .
2021/01/15 19:28:57 [W] query_util.go 869: can't find class for id[gotorail:] , search subdix of class!
2021/01/15 19:28:57 [W] cypher_util.go 760: gotorail: not Exist, ignore & continue .
2021/01/15 19:29:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:29:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:30:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:30:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:30:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:18 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:31:18 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:31:18 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:31:18 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:31:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:42 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:43 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:45 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:31:45 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:31:45 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:31:45 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:31:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:31:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:15 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:32:15 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:32:15 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:32:15 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:32:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:32:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:33:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:33:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:34:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:34:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:07 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:35:07 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:35:07 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:35:07 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:35:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:35:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:36:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:36:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:37:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:37:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:38:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:38:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:39:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:39:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:40:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:40:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:40:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:41:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:42:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:42:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:43:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:43:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:44:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:44:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:45:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:45:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:46:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:47:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:48:59 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:48:59 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:48:59 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:48:59 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:49:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:49:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:49:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:49:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:49:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:49:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:15 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:50:15 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:50:15 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:50:15 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:50:17 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:50:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:16 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:51:16 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:51:16 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:51:16 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:51:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:25 [W] query_util.go 869: can't find class for id[hotel:] , search subdix of class!
2021/01/15 19:51:25 [W] query_util.go 869: can't find class for id[gotooutin:] , search subdix of class!
2021/01/15 19:51:25 [W] cypher_util.go 760: gotooutin: not Exist, ignore & continue .
2021/01/15 19:51:25 [W] query_util.go 869: can't find class for id[gotominhangexit:] , search subdix of class!
2021/01/15 19:51:25 [W] cypher_util.go 760: gotominhangexit: not Exist, ignore & continue .
2021/01/15 19:51:25 [W] query_util.go 869: can't find class for id[gotominhangticket:] , search subdix of class!
2021/01/15 19:51:25 [W] cypher_util.go 760: gotominhangticket: not Exist, ignore & continue .
2021/01/15 19:51:25 [W] query_util.go 869: can't find class for id[gotorail:] , search subdix of class!
2021/01/15 19:51:25 [W] cypher_util.go 760: gotorail: not Exist, ignore & continue .
2021/01/15 19:51:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:51:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:52:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:52:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:28 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:29 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:30 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:31 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:53:31 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:53:31 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:53:31 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:53:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:53:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:54:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:54:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:55:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:55:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:56:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:51 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:57:55 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 19:57:55 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 19:57:55 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 19:57:55 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 19:58:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:06 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:58:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:59:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 19:59:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:00:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:00:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:23 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:01:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:02:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:02:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:03:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:03:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:04:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:04:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:07 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:08 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:09 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:13 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 20:05:13 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 20:05:13 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 20:05:13 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 20:05:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:05:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:06:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:06:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:07:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:07:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:08:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:08:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:09:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:09:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:10:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:10:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:11:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:11:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:12:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:12:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:10 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:13 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:14 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:15 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:16 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:16 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 20:13:16 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 20:13:16 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 20:13:16 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 20:13:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:22 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:24 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:25 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:58 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:13:59 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:00 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:11 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:14:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:15:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:15:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:15:37 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getBankrecordByIdno.js PUT
2021/01/15 20:15:37 [I] fs.go 56: Write data: /**
 * 通过身份证号，交易金额，交易时间段查询和当前人员发生交易的账号及人员姓名
*/
//1、查询当前身份证号用户的所有账号和卡号
//从图谱中接收到的前台传值
var input = INPUT;
//定义的一些查询条件
var input = {money:'5000',startTime:'2020-01-01 12:30:00',endTime:'2020-06-20 12:30:00'};
 
//var input = JSON.parse(decodeURIComponent(INPUT));

var getBanks = function(){
    var banks = null;
    var arr = []; 
    try{
        
        var mqlStr = "SELECT accountno,cardno FROM /matrix/entity/bankaccount where accountidno = '" + input.idNo + "'";
        log.info(mqlStr);
        banks = odb.mql(mqlStr).data;
        
        //banks = _.map(banks,'cardno').join(",");
        
        _.each(banks,function(element, index){
            if(element.accountno){ 
                arr.push(element.accountno); 
            }
            if(element.cardno){
                arr.push(element.cardno); 
            }
        });
    } catch(err){
        log.error(err)
        return null;
    }
    
    log.info(arr);
    arr = _.union(arr);
    return arr;
};

OUTPUT = getBanks();
//OUTPUT = getOtherBanks();
2021/01/15 20:15:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:15:37 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getBankrecordByIdno.js POST
2021/01/15 20:15:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:55 [I] modb.go 723: Export class /matrix/action/alipayaccoutdetails
2021/01/15 20:16:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:16:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:01 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:02 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:03 [I] modb.go 723: Export class /matrix/action/bankrecord
2021/01/15 20:17:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:03 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:18 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:19 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:20 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:21 [I] modb.go 723: Export class /matrix/action/accommodation
2021/01/15 20:17:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:21 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:17:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:18:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:18:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:19:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:19:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:19:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:20:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:20:48 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getBankrecordByIdno.js PUT
2021/01/15 20:20:48 [I] fs.go 56: Write data: /**
 * 通过身份证号，交易金额，交易时间段查询和当前人员发生交易的账号及人员姓名
*/
//1、查询当前身份证号用户的所有账号和卡号
//从图谱中接收到的前台传值
var input = INPUT;
//定义的一些查询条件
var input = {money:'5000',startTime:'2021-01-01 00:00:00',endTime:'2021-12-31 23:59:59'};
 
//var input = JSON.parse(decodeURIComponent(INPUT));

var getBanks = function(){
    var banks = null;
    var arr = []; 
    try{
        
        var mqlStr = "SELECT accountno,cardno FROM /matrix/entity/bankaccount where accountidno = '" + input + "'";
        log.info(mqlStr);
        banks = odb.mql(mqlStr).data;
        
        //banks = _.map(banks,'cardno').join(",");
        
        _.each(banks,function(element, index){
            if(element.accountno){ 
                arr.push(element.accountno); 
            }
            if(element.cardno){
                arr.push(element.cardno); 
            }
        });
    } catch(err){
        log.error(err)
        return null;
    }
    
    log.info(arr);
    arr = _.union(arr);
    return arr;
};

OUTPUT = getBanks();
//OUTPUT = getOtherBanks();
2021/01/15 20:20:48 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:20:48 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getBankrecordByIdno.js POST
2021/01/15 20:20:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:21:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:21:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:22:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:22:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:23:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:23:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:24:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:24:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:25:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:25:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:26:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:26:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:27:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:27:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:28:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:28:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:29:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:29:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:30:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:30:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:05 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getBankrecordByIdno.js PUT
2021/01/15 20:31:05 [I] fs.go 56: Write data: /**
 * 通过身份证号，交易金额，交易时间段查询和当前人员发生交易的账号及人员姓名
*/
//1、查询当前身份证号用户的所有账号和卡号
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var input = {money:'5000',startTime:'2021-01-01 00:00:00',endTime:'2021-12-31 23:59:59'};
 
//var input = JSON.parse(decodeURIComponent(INPUT));

var getBanks = function(){
    var banks = null;
    var arr = []; 
    try{
        
        var mqlStr = "SELECT accountno,cardno FROM /matrix/entity/bankaccount where accountidno = '" + input + "'";
        log.info(mqlStr);
        banks = odb.mql(mqlStr).data;
        
        //banks = _.map(banks,'cardno').join(",");
        
        _.each(banks,function(element, index){
            if(element.accountno){ 
                arr.push(element.accountno); 
            }
            if(element.cardno){
                arr.push(element.cardno); 
            }
        });
    } catch(err){
        log.error(err)
        return null;
    }
    
    log.info(arr);
    arr = _.union(arr);
    return arr;
};

OUTPUT = getBanks();
//OUTPUT = getOtherBanks();
2021/01/15 20:31:05 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:05 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getBankrecordByIdno.js POST
2021/01/15 20:31:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:46 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getBankrecordByIdno.js PUT
2021/01/15 20:31:46 [I] fs.go 56: Write data: /**
 * 通过身份证号，交易金额，交易时间段查询和当前人员发生交易的账号及人员姓名
*/
//1、查询当前身份证号用户的所有账号和卡号
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {money:'5000',startTime:'2021-01-01 00:00:00',endTime:'2021-12-31 23:59:59'};
 
//var input = JSON.parse(decodeURIComponent(INPUT));

var getBanks = function(){
    var banks = null;
    var arr = []; 
    try{
        
        var mqlStr = "SELECT accountno,cardno FROM /matrix/entity/bankaccount where id = '" + input + "' and  money >='" + inputs.money + "'";
        log.info(mqlStr);
        banks = odb.mql(mqlStr).data;
        
        //banks = _.map(banks,'cardno').join(",");
        
        _.each(banks,function(element, index){
            if(element.accountno){ 
                arr.push(element.accountno); 
            }
            if(element.cardno){
                arr.push(element.cardno); 
            }
        });
    } catch(err){
        log.error(err)
        return null;
    }
    
    log.info(arr);
    arr = _.union(arr);
    return arr;
};

OUTPUT = getBanks();
//OUTPUT = getOtherBanks();
2021/01/15 20:31:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:31:46 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getBankrecordByIdno.js POST
2021/01/15 20:31:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:12 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getBankrecordByIdno.js PUT
2021/01/15 20:32:12 [I] fs.go 56: Write data: /**
 * 通过身份证号，交易金额，交易时间段查询和当前人员发生交易的账号及人员姓名
*/
//1、查询当前身份证号用户的所有账号和卡号
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {money:'5000',startTime:'2021-01-01 00:00:00',endTime:'2021-12-31 23:59:59'};
 
//var input = JSON.parse(decodeURIComponent(INPUT));

var getBanks = function(){
    var banks = null;
    var arr = []; 
    try{
        
        var mqlStr = "SELECT accountno,cardno FROM /matrix/entity/bankaccount where id = '" + input + "' and  money >='" + inputs.money + "' and  startTime >='" + inputs.startTime + "' and  endTime >='" + inputs.endTime + "'";
        log.info(mqlStr);
        banks = odb.mql(mqlStr).data;
        
        //banks = _.map(banks,'cardno').join(",");
        
        _.each(banks,function(element, index){
            if(element.accountno){ 
                arr.push(element.accountno); 
            }
            if(element.cardno){
                arr.push(element.cardno); 
            }
        });
    } catch(err){
        log.error(err)
        return null;
    }
    
    log.info(arr);
    arr = _.union(arr);
    return arr;
};

OUTPUT = getBanks();
//OUTPUT = getOtherBanks();
2021/01/15 20:32:12 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:12 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getBankrecordByIdno.js POST
2021/01/15 20:32:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:49 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:55 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:32:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:50 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:33:50 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:1,startTime:'2020-01-01 12:30:00',endTime:'2020-05-20 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where idno = "+input.idNo).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:33:50 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:50 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:33:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:52 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:53 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:54 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:33:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:34:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:34:47 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:34:47 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:5,startTime:'2020-01-01 12:30:00',endTime:'2020-12-30 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where idno = "+input.idNo).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:34:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:34:47 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:34:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:04 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:35:04 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:5,startTime:'2020-01-01 12:30:00',endTime:'2020-12-30 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where id = "+input).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:35:04 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:04 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:35:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:39 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:35:39 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:5,startTime:'2020-01-01 12:30:00',endTime:'2020-12-30 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where id = "+input).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:35:39 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:39 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:35:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:40 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:35:40 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:5,startTime:'2020-01-01 12:30:00',endTime:'2020-12-30 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where id = "+input).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:35:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:40 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:35:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:41 [I] fs.go 38: Write file (js) /script/bizApi/hdim/getCallRecordByPhone.js PUT
2021/01/15 20:35:41 [I] fs.go 56: Write data: /**
 * 这是通过用户身份证查询话单通话人的API
 * 
 * 接收参数为时间段,身份证号,拨打或接听次数
 */
//var input = JSON.parse(decodeURIComponent(INPUT));
//从图谱中接收到的前台传值银行卡号信息
var input = INPUT;
//定义的一些查询条件
var inputs = {num:5,startTime:'2020-01-01 12:30:00',endTime:'2020-12-30 12:30:00'};
var res1=null;
var res2=null;
var getPhones = function(){
    var phones = null;
    try{
        //这边是查询出符合条件的电话号码相关信息
        phones = odb.mql("SELECT phonenumber FROM /matrix/entity/phonenumber where id = "+input).data;
        phones = _.map(phones,'phonenumber').join(",");
        
    } catch(err){
        return null;
    }
    return phones;
}

var getOtherPhones = function(){
    var sql = '';
    var phones = getPhones();
    var res = [];
    if(phones){
        sql += " and (phonenumber in ("+phones+") or oppositenumber in ("+phones+"))";
    
        if(input.startTime){
            sql += " and starttime >= '"+input.startTime+"'";
        }
        if(input.endTime){
            sql += " and starttime <= '"+input.endTime+"'";
        }
        var rtn1 = [];
        try{
            rtn1 = odb.mql("SELECT oppositenumber,phonenumber FROM /matrix/action/callrecord WHERE class='/matrix/action/callrecord'"+sql).data;
        } catch(err){
            rtn1 = [];
        }
        //取出对象中的联系人手机号转成数组
         res1 = _.map(rtn1,function(obj){return obj.oppositenumber});
         res2 = _.map(rtn1,function(obj){return obj.phonenumber});
        //计算每个手机号联系次数
        res1 = _.countBy(res1,function(phone){return phone});
        res2 = _.countBy(res2,function(phone){return phone});
        //筛选次数大于num值的记录
        res1 = _.map(res1,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res2 = _.map(res2,function(num,key){
            if(num >= input.num){
                return key;
            }else{
                return "-1";
            }
        });
        res = _.union(res1,res2);
    }
    return res;
}

var getRes = function(){
    var otherPhones = getOtherPhones();
    var phones = [];
    if(otherPhones.length > 0){
        var otherPhonesStr = otherPhones.join(",");
        phones = odb.mql("SELECT phonenumber,idno,owner FROM /matrix/entity/phonenumber where phonenumber in ("+otherPhonesStr+") and idno != "+input.idNo).data;
    }
    var obj = {
        idNo:input.idNo,
        list:phones
    };
    return obj;
}

OUTPUT = getPhones();



2021/01/15 20:35:41 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:35:41 [I] fs.go 590: Sync file to local /script/bizApi/hdim/getCallRecordByPhone.js POST
2021/01/15 20:35:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:36:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:36:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:37:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:37:56 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:26 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:31 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:32 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:33 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:34 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:35 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:36 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:37 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:38 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:38 [W] query_util.go 869: can't find class for id[biz:数字国网] , search subdix of class!
2021/01/15 20:38:38 [W] cypher_util.go 760: biz:数字国网 not Exist, ignore & continue .
2021/01/15 20:38:38 [W] query_util.go 869: can't find class for id[biz:开发测试] , search subdix of class!
2021/01/15 20:38:38 [W] cypher_util.go 760: biz:开发测试 not Exist, ignore & continue .
2021/01/15 20:38:40 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:44 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:45 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:46 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:47 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:38:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:39:27 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:39:57 [W] context.go 464: verify license failed: The license expired
2021/01/15 20:40:26 [W] context.go 464: verify license failed: The license expired
