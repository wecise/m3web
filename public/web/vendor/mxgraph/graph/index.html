l<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]-->
<!DOCTYPE html>
<html>
<head>
    <title>M³ Creative Center</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="styles/grapheditor.css">

	<script src="/web/vendor/jquery/jquery-3.3.1.min.js"></script>

	<!-- Bootstrap core CSS -->
	<link href="/web/css/bootstrap-3.3.7/less/bootstrap.less" rel="stylesheet/less" type="text/css">
	<script src="/web/vendor/less/dist/less.min.js"></script>

	<!-- Less core JavaScript-->
	<!--<link href="{{AppSubUrl}}/web/css/bootstrap-3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">-->
	<script src="/web/css/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>

	<!-- Color Theme core CSS -->
	<link href="/web/css/color/color_style.min.css" rel="stylesheet">
	<link href="/web/css/color/color_style_responsive.min.css" rel="stylesheet">
	<link href="/web/css/color/style.min.css" rel="stylesheet">

	<!-- Bootstrap ICON  CSS -->
	<link href="/web/vendor/font-awesome/4.7.1/css/font-awesome.min.css" rel="stylesheet" >

	<!-- Bootstrap Table CSS -->
	<link href="/web/vendor/table/bootstrap/bootstrap-table.css" rel="stylesheet">
	<!-- Sweetalert core CSS -->
	<link href="/web/vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
	<!-- jquery-file-upload core CSS -->
	<link href="/web/vendor/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" >
	<!-- animate core CSS -->
	<link href="/web/vendor/animate/animate.css" rel="stylesheet" >
	
	<style>

		span{
			font-size: 12px;
		}

		* {
			/* -webkit-box-sizing: border-box; */
	    	/* -moz-box-sizing: border-box; */
	    	box-sizing: initial;
		}

		div.mxWindowPane {
			overflow: auto!important;
			background-color: #ffffff;
		}

		#config-accordion > .panel > .panel-collapse {
			max-height: 400px;
			overflow: auto;
		}

		.alarm-red {
            fill: #ff0000;
            stroke:#ffffff;
            stroke-opacity: 1;
            stroke-width:0.5;

            animation-duration: 4s;
            animation-delay: 2s;
            animation-iteration-count: infinite;
        }

        .geSidebar {
		    background: #fff!important;
		    border-bottom: none!important;
		    padding-bottom: 10px 8px 0px!important;
		}

		.geSidebar > center {
			padding-bottom: 0px!important;
		}
		

		/* For Sidebar Tabs */
        #imap-tabs > .nav-tabs {
            border: none;
            border-bottom: 1px solid rgba(3,3,3,.3);
            background-color: transparent;
        }

        #imap-tabs > .nav>li>a {
            padding: 5px 15px;
            border-radius: 0;
            color: rgba(3,3,3,.8);
			font-weight: normal;
			font-size: 12px;
        }

        #imap-tabs > .nav>li>a:hover {
            background-color: rgba(102,204,255,1);
            color: rgba(3,3,3,.8);
            border: none;
        }

		#imap-tabs > .nav-tabs>li.active>a, #imap-tabs > .nav-tabs>li.active>a:focus, #imap-tabs > .nav-tabs>li.active>a:hover {
            border: none;
            border-bottom: 2px solid #e5e5e5!important;
            color: rgba(3,3,3,.8);
            font-weight:bolder;
            font-size: 12px;
        }

        #imap-tabs > .tab-content {
        	padding: 2px;
        }

        
        /*box tip*/
        .box {
		    width: 32.40741%;
		    float: left;
		    margin-left: 0.46296%;
		    margin-right: 0.46296%;
		    position: relative;
		    background: #333;
		    color: #fff;
		    padding: 1%;
		    margin: -11% -7%;
		    white-space: nowrap;
		    border-radius: 5px;
		}
		.box:after {
		    top: 100%;
			left: 25%;
			border: solid transparent;
			content: " ";
			height: 0;
			width: 0;
			position: absolute;
			pointer-events: none;
			border-color: rgba(51, 51, 51, 0);
			border-top-color: #333;
			border-width: 8px;
			margin-left: -12px;
		}
		
		.box > .btn-xs.btn-default {
			padding: 0px 10px;
    		line-height: 2;
			
			color: #fff;
    		font-size:10.8px;
    		-webkit-transform-origin-x: 0;
            -webkit-transform: scale(0.90);
			
        	background-color: transparent!important;
    		border: none!important;
    		border-right: 1px solid #fff!important;
    		border-radius: 0px!important;
		}

		.box > .btn-xs.btn-default:last-child {
			border-right: none!important;
		}
	
		/* Alarm */
		.alarm-red {
            fill: #ff0000;
            stroke:#ffffff;
            stroke-opacity: 1;
            stroke-width:0.5;

            animation-duration: 4s;
            animation-delay: 2s;
            animation-iteration-count: infinite;
        }


        /* For mx-save mx-close */
        .mx-save {
        	font-size: 14px; 
        	width: 18px; 
        	height: 18px; 
        	background-position: 50% 50%; 
        	background-repeat: no-repeat; 
        	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA00lEQVQ4T+2TzQ2CQBCFZ4yJ14UG1MSlDkugBK8uF+mADvACZ0uwBErw7JqIDchcTQxjIK4GsiSgHp3zm2/+3iB8GVjli+S4QsAYEUQfHjMQA4cUeLsa4KSaCiWFk+qsUHLZhoj05AOXOQXewWicROdFIGc1wE01X5XELoCb6KgcQUZrmRmNyfk9gG9jn8I52XYh4rPAyX1fjWntoJoVmbeIMLUBmOHCiBtSi70V0OcCRvMHvL3T8MHHSzRWHgJoWPn5TFHX/dvg2g/A0euZhlRuax96mLYR5kKNzAAAAABJRU5ErkJggg==');
        }

        .mx-close {
        	font-size: 14px; 
        	width: 18px; 
        	height: 18px; 
        	background-position: 50% 50%; 
        	background-repeat: no-repeat; 
        	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7UlEQVQ4T6XTOw6CQBAG4Bnio0VPIIlsK0fgCN5AbJdGT6A3UAuwFG/iDaRmC28AtkTimN0EY8yCILQwX+ZnZhA6PtixHhRgBolnIJ5qMcJD6k9X398oYBwKeua90X1t3XWIubuZOCjizLcnlUDK7do4o1BcMm67fwMq6lG4xpMWqc+WJfSO8KuDsmAcJhEQUIloAZkZhsWs6qci0R4BYonogSBxDMB5FUBI6l3GmdM6ghw5Iqwo77tyaq0AM0gcRIjKYtlFY0COkfKeav1zX5ov0vBxzTiz9HsQiC0gbOrvgs4pZ54W6HJQna/xBfVGdxFVdgegAAAAAElFTkSuQmCC');
        }

        /* For Editor */

        #editor { 
	        margin: 0;
	        position: absolute;
	        top: 0;
	        bottom: 20px;
	        left: 0;
	        right: 0;
	    }
	    #statusBar {
	        margin: 0;
	        padding: 0;
	        position: absolute;
	        left: 0;
	        right: 0;
	        bottom: 0;
	        height: 20px;
	        background-color: rgb(245, 245, 245);
	        color: gray;
	    }
	    .ace_status-indicator {
	        color: #999;
		    position: absolute;
		    border-right: 1px solid #ddd;
		    left: 5px;
		    padding: 2px 5px 0px 0px;
		}

		.nav {
			margin-bottom: 0;
			padding-left: 0;
			list-style: none;
		}
		ul {
			border: none;
			border-bottom: 1px solid rgb(239, 239, 239);
			display: -webkit-box;
			padding: 5px 0px;
		}
	</style>

    <script type="text/javascript">
 		mxBasePath = '/web/vendor/mxgraph/src';
 	</script>
 	
	<script type="text/javascript">
		// Parses URL parameters. Supported parameters are:
		// - lang=xy: Specifies the language of the user interface.
		// - touch=1: Enables a touch-style user interface.
		// - storage=local: Enables HTML5 local storage.
		// - chrome=0: Chromeless mode.
		var urlParams = (function(url)
		{
			var result = new Object();
			var idx = url.lastIndexOf('?');
	
			if (idx > 0)
			{
				var params = url.substring(idx + 1).split('&');
				
				for (var i = 0; i < params.length; i++)
				{
					idx = params[i].indexOf('=');
					
					if (idx > 0)
					{
						result[params[i].substring(0, idx)] = params[i].substring(idx + 1);
					}
				}
			}
			
			return result;
		})(window.location.href);
	
		// Default resources are included in grapheditor resources
		mxLoadResources = false;
	</script>


	<script type="text/javascript" src="/web/vendor/lodash/dist/lodash.min.js"></script>

	<!-- Bootstrap Table JS -->
	<script src="/web/vendor/table/bootstrap/bootstrap-table.js"></script>
	<script src="/web/vendor/table/bootstrap/locale/bootstrap-table-zh-CN.js"></script>
	<!-- Less JS -->
	<!--link href="/web/vendor/css/style_steroids.less" rel="stylesheet/less" type="text/css">
	<link href="/web/vendor/css/style_inspinia.less" rel="stylesheet/less" type="text/css">
	<script src="/web/vendor/less.js/dist/less.min.js"></script-->

	<!-- sweetalert core JS -->
	<script src="/web/vendor/sweetalert2/dist/sweetalert2.min.js"></script>
	<!--Mark JS-->
	<script src="/web/vendor/mark/dist/jquery.mark.min.js"></script>
	<!--Moment JS-->
	<script src="/web/vendor/moment/min/moment.min.js"></script>
	<script src="/web/vendor/moment/min/moment-with-locales.min.js"></script>
	<!--Layer JS-->
	<script src="/web/vendor/layer/layer.js"></script>
	<!--VUE Core JS-->
	<script src="/web/vendor/vue/2.5.13/dist/vue.min.js"></script>

	<!--Jquery File Upload JS-->
	<script src="/web/vendor/js-load-image/js/load-image.all.min.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/canvas-to-blob.min.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/jquery.iframe-transport.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/jquery.fileupload.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/jquery.fileupload-process.js"></script>
	<script src="/web/vendor/jquery-file-upload/js/jquery.fileupload-image.js"></script>
	
    <!-- ECharts单文件引入 -->
	<script src="/web/vendor/echart/echarts.min.js"></script>
	<!-- ACE JS-->
	<script src="/web/vendor/ace/src-noconflict/ace.js"></script>
	<script src="/web/vendor/ace/src-noconflict/ext-statusbar.js"></script>
	<script src="/web/vendor/ace/src-noconflict/snippets/lua.js"></script>
	<!--script src="/web/vendor/ace/src-noconflict/worker-lua.js"></script-->
	<script src="/web/vendor/ace/src-noconflict/mode-lua.js"></script>

	<script src="/web/vendor/ace/src-noconflict/snippets/json.js"></script>
	<script src="/web/vendor/ace/src-noconflict/worker-json.js"></script>
	<script src="/web/vendor/ace/src-noconflict/mode-json.js"></script>

	<script src="/web/vendor/ace/src-noconflict/theme-clouds.js"></script>
	<script src="/web/vendor/ace/src-noconflict/theme-terminal.js"></script>
	<script src="/web/vendor/ace/src-noconflict/theme-xcode.js"></script>

	<script src="/web/vendor/ace/src-noconflict/snippets/sql.js"></script>
	<script src="/web/vendor/ace/src-noconflict/mode-sql.js"></script>

	<script src="/web/vendor/ace/src-noconflict/ext-language_tools.js"></script>

	<!--localforage Core JS -->
	<script src="/web/vendor/localForage/dist/localforage.min.js"></script>

	<script src="/web/js/util.js"></script>
	<script src="/web/js/cfg.js"></script>
	<script src="/web/js/init.js"></script>
	
	<script type="text/javascript" src="js/Init.js"></script>
	<script type="text/javascript" src="jscolor/jscolor.js"></script>
	<script type="text/javascript" src="sanitizer/sanitizer.min.js"></script>
	<script type="text/javascript" src="../src/js/mxClient.js"></script>
	<script type="text/javascript" src="js/EditorUi.js"></script>
	<script type="text/javascript" src="js/Editor.js"></script>
	<script type="text/javascript" src="js/Sidebar.js"></script>
	<script type="text/javascript" src="js/Graph.js"></script>
	<script type="text/javascript" src="js/Shapes.js"></script>
	<script type="text/javascript" src="js/Actions.js"></script>
	<script type="text/javascript" src="js/Menus.js"></script>
	<script type="text/javascript" src="js/Format.js"></script>
	<script type="text/javascript" src="js/Toolbar.js"></script>
	<script type="text/javascript" src="js/Dialogs.js"></script>
	<script type="text/javascript" src="js/Footbar.js"></script>
</head>
<body class="geEditor">
	<script type="text/javascript">
		// Extends EditorUi to update I/O action states based on availability of backend
		(function()
		{
			let tmp = localStorage.getItem("graph-object");
			let graphObject = _.attempt(JSON.parse.bind(null, tmp));
			
			window.mxLanguage = graphObject.lang;

			var editorUiInit = EditorUi.prototype.init;
			var editorModel = {};
			var preset = JSON.stringify({"name":"All Time", value: " ", scale: {'scale':'year', 'step': 1, 'title':'年', 'pattern':'LLL'}});

			Vue.component('object-script-editor-component',{
	            delimiters: ['${', '}'],
	            template: `<div :id="id" style="padding-bottom:20px; height:95%;"></div>`,
	            props: {
	                id: String,
	                model: Object
	            },
	            data: function(){
	                return {
	                    editor: Object,
	                    inputText: String,
	                }
	            },
	            mounted: function(){
	                var self = this;

	                self.$nextTick(function(){
	                    self.init();
	                })
	            },
	            watch: {
	                'model.oldInput': {
	                	handler:function(val,oldVal){
		                    var self = this;

		                    self.editor.setValue(val);
		                },
		                deep:true
		            }
	            },
	            created: function () {
	                var self = this;

	            },
	            methods: {
	                init: function() {
	                    var self = this;

	                    self.editor = ace.edit(self.id);
	                    var StatusBar = ace.require("ace/ext/statusbar").StatusBar;
    					var statusBar = new StatusBar(self.editor, document.getElementById("statusBar"));

	                    self.editor.setOptions({
	                        maxLines: Infinity
	                    });
	                    self.editor.$blockScrolling = Infinity;
	                    self.editor.on("change", function(e){
	                    	eventHub.$emit("editor-script-input-event",self.editor.getValue());
	                    });

	                    if(_.isEmpty(self.model.mode)) {
	                        self.model.mode = "sql";
	                    }

	                    self.setTheme();
	                    self.setMode();
	                    
	                },
	                setTheme: function(){
	                    var self = this;

	                    self.editor.setTheme("ace/theme/xcode");
	                },
	                setMode: function(){
	                    var self = this;

	                    self.editor.getSession().setMode("ace/mode/"+ self.model.mode);
	                },
	                setValue: function(){
	                    var self = this;

	                    self.editor.setValue(self.model.oldInput);
	                },
	                getSelected: function(){
	                    var self = this;
	                    var temp = self.editor.getSelectedText();

	                    if(_.isEmpty(temp)){
	                        self.inputText = self.editor.getValue();
	                    } else {
	                        self.inputText = temp;
	                    }
	                },
	                query: function(){
	                    var self = this;
	                    var oneLevelLoading = null;

	                    self.getSelected();

	                    jQuery.ajax({
	                         url: "/mxobject/list/sql",
	                         dataType: 'json',
	                         type: 'POST',
	                         data: {
	                         	ctype:"obj",
	                         	sql: self.inputText
	                         },
	                         beforeSend:function(xhr){ 
	                            oneLevelLoading = layer.load(2, {
	                                      shade: [0.1,'#ccc'],
	                                      time: 30*1000
	                                    });
	                         },
	                         complete: function(xhr, textStatus) {
	                            layer.close(oneLevelLoading);
	                         },
	                         success: function (data, status) {
	                            if(data.message == "OK") {
	                                swal("执行成功！");
	                                layer.close(oneLevelLoading);
	                            } 
	                            eventHub.$emit("object-query-get-event", data.message);
	                         },
	                         error: function(err){
	                             layer.close(oneLevelLoading);
	                         }  
	                    });
	                }
	            }
	        })

			Vue.component('bootstrap-table', {
	            template: `<table :id="id" class="table table-striped"></table>`,
	            props:{
	            	id: String,
	                columns: Array,
	                data: Array,
	                options: Object,
	            },
	            mounted: function () {
	                var self = this;

	                self.$nextTick(function () {
	                	_.delay(function(){
	                    	$(".fixed-table-toolbar").remove();
	                    },500)
	                })
	            },
	            watch: {
				    data: function (val) {
				    	var self = this;

				    	$(self.$el).bootstrapTable('load', val);
				    },
				    columns: {
				    	handler: function(val,oldVal) {
							    	var self = this;
							    	
							    	$(self.$el).bootstrapTable({columns: val,data: self.data});
					    },
					    deep:true
				    },
				    options: function(val) {
		                var self = this;

		                $(self.$el).bootstrapTable('refreshOptions', val);
		            }
				},
				methods: {
				    mark: function(){
				    	var self = this;
				    	
			    	    $(self.$el).unmark({
					      	done: function() {
					        	$(self.$el).mark(['err','ERROR','CRITICAL','Critical','Failed','failed','Exception','GC'], {
																				        "element": "span",
																				        "className": "btn-danger",
																				        "separateWordSearch": true
																				      }
								);
					      }
					    });
				    	
				    }
				}
	        }); 

			Vue.component('config-component',{
				delimiters: ['${', '}'],
				template: "#config-component-template",
				props: {
					id: String,
					model: {
						normal: [],
						elements:[]
					}
				},
				mounted: function(){
					var self = this;

					self.$nextTick(function(){
						$(document).mousedown(function(event) {
							autosize($(self.$el).find("textarea"));
						});

					})
				},
				methods:{
					updateHandler: function(event){
						eventHub.$emit("config-update-event",event);
					}
				}
			})
			
			function mxVertexToolHandler(state)
			{
				mxVertexHandler.apply(this, arguments);
			};

			mxVertexToolHandler.prototype = new mxVertexHandler();
			mxVertexToolHandler.prototype.constructor = mxVertexToolHandler;

			mxVertexToolHandler.prototype.domNode = null;

			mxVertexToolHandler.prototype.init = function()
			{
				mxVertexHandler.prototype.init.apply(this, arguments);

				this.domNode = document.createElement('div');
				this.domNode.style.position = 'relative';
				this.domNode.style.backgroundColor = '#333';
				this.domNode.style.width = 'auto';
				this.domNode.style.height = '26px';
				this.domNode.style.whiteSpace = 'nowrap';
				this.domNode.style.padding = '0px 0px';
    			this.domNode.style.borderRadius = '0px';

    			this.domNode.className = 'box animated fadeIn';
				
				
				function createDiv(src,fn)
				{
					if (mxClient.IS_IE && !mxClient.IS_SVG)
					{
						var a = document.createElement('div');
						a.style.backgroundColor = '#333';
						a.style.display = (mxClient.IS_QUIRKS) ? 'inline' : 'inline-block';
						
						return a;
					}
					else
					{
						return mxUtils.button(src,fn);
					}
				};

				// 事件
				var btn = createDiv('事件',null);
				btn.setAttribute('title', '');
				btn.style.width = 'auto';
				btn.style.height = 'auto';
				btn.innerHTML = mxResources.get("mx-contextmenu-event");
				btn.className = "btn btn-xs btn-default ";
				mxEvent.addGestureListeners(btn,
					mxUtils.bind(this, function(evt)
					{
						// Disables dragging the image
						mxEvent.consume(evt);
					})
				);
				mxEvent.addListener(btn, 'click',
					mxUtils.bind(this, function(evt)
					{
						//this.graph.removeCells([this.state.cell]);
						var cellSelected = "entity="+this.state.cell.value;

	            		localStorage.setItem("search-open-event",JSON.stringify({
		                                                                id: cellSelected, 
		                                                                preset:preset
		                                                            }));
						window.open(
	                            "/janesware/event",
	                            "_blank"
	                        );

						mxEvent.consume(evt);
					})
				);
				this.domNode.appendChild(btn);

				// 性能
				var btn = createDiv('性能',null);
				btn.setAttribute('title', '');
				btn.style.width = 'auto';
				btn.style.height = 'auto';
				btn.innerHTML = mxResources.get("mx-contextmenu-performance");
				btn.className = "btn btn-xs btn-default";
				mxEvent.addGestureListeners(btn,
					mxUtils.bind(this, function(evt)
					{
						// Disables dragging the image
						
						mxEvent.consume(evt);
					})
				);
				mxEvent.addListener(btn, 'click',
					mxUtils.bind(this, function(evt)
					{
						var cellSelected = "entity="+this.state.cell.value;
						
						localStorage.setItem("search-open-performance",JSON.stringify({
		                                                                id: cellSelected, 
		                                                                preset:preset
		                                                            }));
						window.open(
	                            "/janesware/performance",
	                            "_blank"
	                        );

						mxEvent.consume(evt);
					})
				);
				this.domNode.appendChild(btn);

				// 日志
				let logBtn = createDiv('日志',null);
				logBtn.setAttribute('title', '');
				logBtn.style.width = 'auto';
				logBtn.style.height = 'auto';
				logBtn.innerHTML = mxResources.get("mx-contextmenu-log");
				logBtn.className = "btn btn-xs btn-default";
				mxEvent.addGestureListeners(logBtn,
					mxUtils.bind(this, function(evt)
					{
						// Disables dragging the image
						mxEvent.consume(evt);
					})
				);
				mxEvent.addListener(logBtn, 'click',
					mxUtils.bind(this, function(evt)
					{
						var cellSelected = "entity="+this.state.cell.value;
						
						localStorage.setItem("search-open-log",JSON.stringify({
		                                                                id: cellSelected, 
		                                                                preset:preset
		                                                            }));
						window.open(
	                            "/janesware/log",
	                            "_blank"
	                        );

						mxEvent.consume(evt);
					})
				);
				this.domNode.appendChild(logBtn);

				// 配置
				let configBtn = createDiv('配置',null);
				configBtn.setAttribute('title', '');
				configBtn.style.width = 'auto';
				configBtn.style.height = 'auto';
				configBtn.innerHTML = mxResources.get("mx-contextmenu-config");
				configBtn.className = "btn btn-xs btn-default";
				mxEvent.addGestureListeners(configBtn,
					mxUtils.bind(this, function(evt)
					{
						// Disables dragging the image
						mxEvent.consume(evt);
					})
				);
				mxEvent.addListener(configBtn, 'click',
					mxUtils.bind(this, function(evt)
					{
						let _cellSelected = this.state.cell.value;
						let _param = "";
						var win;
						var w = $( window ).width();//document.body.clientWidth;
						var h = $( window ).height();//(document.body.clientHeight || document.documentElement.clientHeight);
						
						var lrwh = [(w-515), (h-625)/4, 510, 600];

						if(_.isEmpty(_cellSelected)) {
							swal("Please Select Node","","info");
							return false;
						} else {
							_param =`#/matrix/entity/: | id=` + _cellSelected;
						}
						
						console.log(_param)
				        jQuery.ajax({
				            url: '/mxobject/search',
				            type: 'POST',
				            dataType: 'json',
				            data: {
				                cond: _param,
				                flag: false
				            },
				            complete: function(xhr, textStatus) {
				            },
				            success: function(data, textStatus, xhr) {
				            	console.log(JSON.stringify(data))
				                if(_.isEmpty(data.message)) return false;
				                
				                var CONFIG_NORMAL =  {};
				                _.map(data.meta.columns,function(v,k){
					                var o = {};
					                o[v] = _.upperFirst(v);
					                return _.merge(CONFIG_NORMAL, o);
					            });
				                
								const CONFIG_EXT = {"element":"Element"};
								
				                let _data = data.message;
				                let tb = document.createElement('div');
								$(tb).append(`<config-component id="show-config-win" :model="model"></config-component>`);
								win = new mxWindow('Config ' + _cellSelected, tb, lrwh[0], lrwh[1], lrwh[2], lrwh[3], true, true);
								win.setMaximizable(true);
								win.setResizable(true);
								win.setClosable(true);
								win.setVisible(true);

								_.delay(function(){
				                	var cfgVue = new Vue({
				                        delimiters: ['${', '}'],
				                        el: '#show-config-win',
				                        data:{
				                            model:{
				                            	normal: [],
				                            	elements: []
				                            }
				                        },
				                        created: function(){
				                        	var self = this;

				                        	self.initFileUpload();
				                        	
				                        	eventHub.$on("config-update-event",self.update);
				                        },
				                        mounted: function(){
				                        	var self = this;

				                        	self.model.normal = _.map(_data[0],function(v,k){ 
								                        			if(k == 'day' || k == 'vtime' || k == 'period') {
								                        				v = moment(v).format("LLL");
								                        			}
								                        			if(typeof v === 'object'){								                        				
								                        				v = _.isEmpty(v)?"":JSON.stringify(v,null,"\t");
								                        			}
								                        			return {name:k, value:v, title: k};
								                        		});
				                        	console.log(222,self.model.normal)

				                        	let _value = _.values(_.pick(_data[0], _.keys(CONFIG_EXT)))[0];
				                        	
				                        	self.model.elements =  _.map(_value, function(v,k){
									                        			return {name:k,title:k,value: v};
									                        	   });
									                        	   
				                        },
				                        methods:{
				                        	update: function(event){
				                        		var self = this;
				                        		
				                        		console.log(JSON.stringify(event))
				                        		return false;
				                        		jQuery.ajax({
							                        url: '/mxobject/actiontoclass',
							                        type: 'POST',
							                        dataType: 'json',
							                        data: {
							                            data: json,
							                            ctype: "insert"
							                        },
							                        beforeSend: function(xhr) {
							                            
							                        },
							                        complete: function(xhr, textStatus) {
							                            
							                        },
							                        success: function(data, textStatus, xhr) {
							                            
							                        },
							                        error: function(xhr, textStatus, errorThrown) {
							                            
							                        }
							                    })
				                        	},
				                        	initFileUpload: function(){
								                var uploadButton = $('<button/>')
								                                    .addClass('btn btn-primary')
								                                    .prop('disabled', true)
								                                    .text('Processing...')
								                                    .on('click', function () {
								                                        var $this = $(this),
								                                            data = $this.data();
								                                        $this
								                                            .off('click')
								                                            .text('中止')
								                                            .on('click', function () {
								                                                $this.remove();
								                                                data.abort();
								                                            });
								                                        data.submit().always(function () {
								                                            $this.remove();
								                                        });
								                                    });
								                $('#fileupload').fileupload({
								                    url: "/fs/home",
								                    dataType: 'json',
								                    autoUpload: false,
								                    acceptFileTypes: /(\.|\/)(gif|jpe?g|png|csv|log|pdf|html|txt)$/i,
								                    maxFileSize: 999000,
								                    // Enable image resizing, except for Android and Opera,
								                    // which actually support image resizing, but fail to
								                    // send Blob objects via XHR requests:
								                    disableImageResize: /Android(?!.*Chrome)|Opera/
								                        .test(window.navigator.userAgent),
								                    previewMaxWidth: 100,
								                    previewMaxHeight: 100,
								                    previewCrop: true
								                })
								                .on('fileuploadadd', function (e, data) {
								                    data.context = $('<div/>').appendTo('#files');
								                    $.each(data.files, function (index, file) {
								                        var node = $('<p/>')
								                                .append($('<span/>').text(file.name));
								                        if (!index) {
								                            node
								                                .append('<br>')
								                                .append(uploadButton.clone(true).data(data));
								                        }
								                        node.appendTo(data.context);
								                    });
								                })
								                .on('fileuploadprocessalways', function (e, data) {
								                    var index = data.index,
								                        file = data.files[index],
								                        node = $(data.context.children()[index]);
								                    if (file.preview) {
								                        node
								                            .prepend('<hr>')
								                            .prepend(file.preview);
								                    }
								                    if (file.error) {
								                        node
								                            .append('<hr>')
								                            .append($('<span class="text-danger"/>').text(file.error));
								                    }
								                    if (index + 1 === data.files.length) {
								                        data.context.find('button')
								                            .text('上传')
								                            .prop('disabled', !!data.files.error);
								                    }
								                })
								                .on('fileuploadprogressall', function (e, data) {
								                    var progress = parseInt(data.loaded / data.total * 100, 10);
								                    $('#progress .progress-bar').css(
								                        'width',
								                        progress + '%'
								                    );
								                })
								                .on('fileuploaddone', function (e, data) {
								                    $.each(data.result.files, function (index, file) {
								                        if (file.url) {
								                            var link = $('<a>')
								                                .attr('target', '_blank')
								                                .prop('href', file.url);
								                            $(data.context.children()[index])
								                                .wrap(link);
								                        } else if (file.error) {
								                            var error = $('<span class="text-danger"/>').text(file.error);
								                            $(data.context.children()[index])
								                                .append('<br>')
								                                .append(error);
								                        }
								                    });
								                    _.delay(function(){
								                        $("#files").empty();
								                        $('#progress .progress-bar').css('width','');
								                    }, 2000)
								                    
								                })
								                .on('fileuploadfail', function (e, data) {
								                    $.each(data.files, function (index) {
								                        var error = $('<span class="text-danger"/>').text('上传失败。');
								                        $(data.context.children()[index])
								                            .append('<br>')
								                            .append(error);
								                    });
								                    _.delay(function(){
								                        $("#files").empty();
								                        $('#progress .progress-bar').css('width','');
								                    }, 2000)
								                    
								                })
								                .prop('disabled', !$.support.fileInput)
								                .parent().addClass($.support.fileInput ? undefined : 'disabled');
								            }
				                        }
				                    })
				                },500);
				            },
				            error: function(xhr, textStatus, errorThrown) {
				            }
				        });
						mxEvent.consume(evt);
					})
				);
				this.domNode.appendChild(configBtn);

				// 诊断
				var btn = createDiv('诊断',null);
				btn.setAttribute('title', '');
				btn.style.width = 'auto';
				btn.style.height = 'auto';
				btn.innerHTML = mxResources.get("mx-contextmenu-diagnosis");
				btn.className = "btn btn-xs btn-default";
				mxEvent.addGestureListeners(btn,
					mxUtils.bind(this, function(evt)
					{
						// Disables dragging the image
						mxEvent.consume(evt);
					})
				);
				mxEvent.addListener(btn, 'click',
					mxUtils.bind(this, function(evt)
					{
						var cellSelected = this.state.cell.value;
						window.open(
                            "/janesware/diagnosis?cond="+cellSelected+"&preset="+preset,
                            "_blank"
                        );
						mxEvent.consume(evt);
					})
				);
				this.domNode.appendChild(btn);

				this.graph.container.appendChild(this.domNode);
				this.redrawTools();
			};

			mxVertexToolHandler.prototype.redraw = function()
			{
				mxVertexHandler.prototype.redraw.apply(this);
				this.redrawTools();
			};

			mxVertexToolHandler.prototype.redrawTools = function()
			{
				if (this.state != null && this.domNode != null)
				{
					var dy = (mxClient.IS_VML && document.compatMode == 'CSS1Compat') ? 20 : 4;
					if(graphObject.action == 'show'){
						dy = 50;
					}
					this.domNode.style.left = (this.state.x + this.state.width - 56) + 'px';
					this.domNode.style.top = (this.state.y + this.state.height + dy) + 'px';
				}
			};
			
			mxVertexToolHandler.prototype.destroy = function(sender, me)
			{
				mxVertexHandler.prototype.destroy.apply(this, arguments);

				if (this.domNode != null)
				{
					this.domNode.parentNode.removeChild(this.domNode);
					this.domNode = null;
				}
			};

			EditorUi.prototype.init = function()
			{
				editorUiInit.apply(this, arguments);
				this.actions.get('export').setEnabled(false);

				// Updates action states which require a backend
				if (!Editor.useLocalStorage)
				{	
					mxUtils.post(OPEN_URL, '', mxUtils.bind(this, function(req)
					{
						var enabled = req.getStatus() != 404;
						this.actions.get('open').setEnabled(enabled || Graph.fileSupport);
						this.actions.get('import').setEnabled(enabled || Graph.fileSupport);
						this.actions.get('save').setEnabled(enabled);
						this.actions.get('saveAs').setEnabled(enabled);
						this.actions.get('export').setEnabled(enabled);
					}));
				}

			};
			
			// Adds required resources (disables loading of fallback properties, this can only
			// be used if we know that all keys are defined in the language specific file)
			mxResources.loadDefaultBundle = false;
			var bundle = mxResources.getDefaultBundle(RESOURCE_BASE, mxLanguage) ||
				mxResources.getSpecialBundle(RESOURCE_BASE, mxLanguage);

			// Fixes possible asynchronous requests
			mxUtils.getAll([bundle, STYLE_PATH + '/default.xml'], function(xhr)
			{
				
				// Adds bundle text to resources
				mxResources.parse(xhr[0].getText());
				
				// Configures the default graph theme
				var themes = new Object();
				themes[Graph.prototype.defaultThemeName] = xhr[1].getDocumentElement(); 
				
				// Main
				var editorUi = new EditorUi(new Editor(graphObject.action == 'show', themes));
				
				editorUi.toggleFormatPanel();
				
				/*
				editorUi.editor.graph.addListener(mxEvent.CLICK, function(sender, evt)
				{
					var e = evt.getProperty('event');
					var cell = evt.getProperty('cell');
							
					if (cell != null)
					{
						var cellSelected = cell.value;
						
						evt.consume();
					}
				});
				*/

				let _list = fetchFileFromFS(graphObject.parent, graphObject.name);

                editorUi.editor.graph.model.beginUpdate();
                try
                {
                    editorUi.editor.setGraphXml(mxUtils.parseXml(_list).documentElement);

                    // LATER: Why is hideDialog between begin-/endUpdate faster?
                    editorUi.hideDialog();
                    if(graphObject.action == 'show') {

                        editorUi.editor.graph.createHandler = function (state) {
                            if (state != null &&
                                this.model.isVertex(state.cell)) {
                                return new mxVertexToolHandler(state);
                            }

                            return mxGraph.prototype.createHandler.apply(this, arguments);
                        };

                        let _encoder = new mxCodec();
                        let _node = _encoder.encode(editorUi.editor.graph.getModel());
                        let _xml = mxUtils.getPrettyXml(_node);

                        chromeless(editorUi.editor.graph);
                        refreshStatus(editorUi.editor.graph, _xml);

                        setInterval(function () {
                            chromeless(editorUi.editor.graph);
                            refreshStatus(editorUi.editor.graph, _xml);
                        }, 30 * 1000);
                    }

                }
                catch (e)
                {
                    error = e;
                }
                finally
                {
                    editorUi.editor.graph.model.endUpdate();
                }

				
				$(".geSprite-editdiagram").removeClass('geSprite');
				$(".geSprite-editdiagram").addClass('fa fa-code');
				$(".geSprite-editdiagram").css("border","none").css("padding","3px").css("font-size","16px");
				
				$(".geSprite-mx-save").removeClass('geSprite');
				$(".geSprite-mx-save").addClass('fa fa-save');
				$(".geSprite-mx-save").css("border","none").css("padding","3px").css("font-size","16px");
				$(".geSprite-mx-save").attr("alt",mxResources.get("fa-save"));
				
				$(".geSprite-mx-close").removeClass('geSprite');
				$(".geSprite-mx-close").addClass('fa fa-sign-out');
				$(".geSprite-mx-close").css("border","none").css("padding","3px").css("font-size","16px");
				$(".geSprite-mx-close").attr("alt",mxResources.get("fa-sign-out"));
				
			
				$(".geToolbarContainer").append(`<a href="javascript:void(0);" title="Fullscreen" class="geButton" style="position: absolute; display: inline-block; top: 5px; right: 73px; padding: 2px; font-size: 14px; width: 16px; height: 16px; background-position: 50% 50%; background-repeat: no-repeat; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABS0lEQVQ4T62TwVECQRBFf0MAYgRiBoSAGWgELrPcJQMxA7wz7RCBZqBGIBlICHBn61uf2qEGpLzgXHZrpvtN9+8/hjOXKb+u6zWAi5LVNM11Smmlvaqq+p1O58vMejmG5NrdLzOAOtAmgGf9u/u0BIYQJgB6Zqbv7rIYo5WAjQ5IJncfneqsrusE4B7ALvYAQPIJwMrMXk5BiuQFScU9loA1yZnKDiFUggC4izG+qZLxeDwk+Q5gEWOsQgjTA4BEyoK1og1UTUpJmkhEiaeYZW4t5+w0OGf9D+C4BfW83W6Xf7WQq96PUVOQiFltM7uZz+cfrdFuAbySHLl7kogAHg6MJICZ9ds579QutclgQSTo8RgpF7ZW/ZWcQYUXNI3BsROzlWetlWWs/WrLluUn+U2UAD2aqyJ+0zTNoHxM3W73uwSS/HT34dlj/AH7KNIRGLhsnwAAAABJRU5ErkJggg==');"></a>&nbsp;&nbsp;
												 <a href="javascript:void(0);" title="Preview Panel" class="geButton" style="position: absolute; display: inline-block; top: 5px; right: 50px; padding: 2px; font-size: 14px; width: 16px; height: 16px; background-position: 50% 50%; background-repeat: no-repeat; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAo0lEQVQ4T+2SsQ0CMQxF/aX0MAJlpLhgBBiBDW4jGIER2AAxQxwp5Y3AAJGMfLqLRAEEhZJfJbL/K/w/qFPo9NMECCFcAKy+hN1F5DABmFmJaN8KUNUtgKOIoALs0wpg5h0RXf+AX98AgF22SRYjEZ1qCnOR1k3ueUlVx5TS8JS95QvASvVWMcbbslAB3vuNc+78yWzzUsqQcx7t3dy+V+BuwANX7VoRrx4R3gAAAABJRU5ErkJggg==');"></a>&nbsp;&nbsp;
												 <a href="javascript:void(0);" title="Format Panel (Ctrl+Shift+P)" class="geButton" style="position: absolute; display: inline-block; top: 5px; right: 6px; padding: 2px; font-size: 14px; width: 16px; height: 16px; background-position: 50% 50%; background-repeat: no-repeat; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfklEQVQ4T+3TwQ2CQBCF4Y8O7EBKsAOxA0ugBEqwJSsQKoBS6AAzYTWaeGDOMpedw3t/Npt/K+vUOJY9cwxVSfc4Z5ole/kEBOSWgCxIAU4YcccVaUCDBwbEvgP+8w0OCJlmTL88CDFC560T2r9V7oqeW8uRi5u0r8+UKX5ln0MMP2FDItXQAAAAAElFTkSuQmCC');"></a>&nbsp;&nbsp;
												 <a href="javascript:void(0);" title="Property Panel" class="geButton" style="position: absolute; display: inline-block; top: 5px; right: 28px; padding: 2px; font-size: 14px; width: 16px; height: 16px; background-position: 50% 50%; background-repeat: no-repeat; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAgElEQVQ4T2NkgAAFBgYGeSibFOogI1T1AQYGBntSdELVOiIbADKkgQRD/jMwMGAYsIGBgeE8AwPDRgYGhgAChmE1AOSK/QwMDAcZGBgcRg0YsWEwgYGBwYCBgeEDAwPDBVLTAShlgRISsQCU7OFJuYCIpItuMMiVCbDMRKytGOoAcyo/YeP/2LEAAAAASUVORK5CYII=');"></a>`);
				
				$("a[title='Fullscreen']").click(function(event){
					toggleFullScreen();
				});

				$("a[title='Preview Panel']").click(function(event){
					
                    let obj = {};
                    obj.lang = graphObject.lang;
                    obj.type = 'show';
                    obj.name = graphObject.name;
                    obj.parent = graphObject.parent;
                    
                    localStorage.setItem("graph-object",JSON.stringify(obj));

                    window.open(
                            "/janesware/creative",
                            "_blank"
                        );
				});

				$("a[title='Format Panel (Ctrl+Shift+P)']").click(function(event){
					editorUi.toggleFormatPanel();
				});

				$("a[title='Property Panel']").click(function(event){
					if(editorUi.hsplitPosition === 0){
						editorUi.hsplitPosition = 208;
					} else{
						editorUi.hsplitPosition = 0;
					}
					editorUi.refresh();
				});

				
				var chromeless = function(graph){
					//graph.setEnabled(false);
					graph.setCellsSelectable(true);
					graph.setCellsCloneable(false);		
					graph.setCellsResizable(false);
					graph.setConnectable(false);
					graph.setCellsEditable(false);
				    graph.setAllowDanglingEdges(false);
				    graph.setAllowLoops(false);
				    graph.setCellsDeletable(false);
				    graph.setCellsDisconnectable(false);
				    graph.setDropEnabled(false);
				    graph.setSplitEnabled(false);
				    graph.setCellsBendable(false);

				    graph.addListener(mxEvent.MOUSEOVER, function(sender, evt)
					{
						$(".geDiagramContainer ").find("img").remove();
					});


					$("body").css({backgroundColor:"#f7f7f7"});
					$(".geMenubarContainer").remove();
					$(".geSidebarContainer").remove();
					$(".geToolbarContainer").remove();
					$(".geHsplit").remove();
					$(".geFooterContainer").remove();
					$(".geDiagramContainer.geDiagramBackdrop").css({right: "0px", left: "0px", top: "50px", bottom: "0px", overflow: "hidden", backgroundColor: "transparent", border: "0px"});
					$(".geDiagramContainer.geDiagramBackdrop").find("svg").css({left: "-35px"});
					$(".geDiagramContainer.geDiagramBackdrop").find(".geBackgroundPage").remove();
				}

				var refreshStatus = function (graph,xml){
					
					if (xml != null && xml.length > 0)
					{
						let doc = mxUtils.parseXml(xml);
						
						if (doc != null && doc.documentElement != null)
						{
							let model = graph.getModel();
							let nodes = doc.documentElement.getElementsByTagName('mxCell');
							
							if (nodes != null && nodes.length > 0)
							{
								model.beginUpdate();

								try
								{
									for (var i = 0; i < nodes.length; i++)
									{
										// Processes the activity nodes inside the process node
										var id = nodes[i].getAttribute('id');
										var value = nodes[i].getAttribute('value');
										
										if(nodes[i].getAttribute('value') != null && nodes[i].getAttribute('value').length > 0 ){

											var state = loadStatus(value);

											// Gets the cell for the given activity name from the model
											var cell = model.getCell(id);
											
											// Updates the cell color and adds some tooltip information
											if (cell != null)
											{	
												// Resets the fillcolor and the overlay
												graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, '#0ad615', [cell]);
												graph.removeCellOverlays(cell);
						
												// Changes the cell color for the known states
												if ( state == 3)
												{
													graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, '#ff0000', [cell]);
													graph.addCellOverlay(cell, createOverlay({src: "/web/vendor/mxgraph/src/images/status/progress/red.svg", width: 60, height: 35}, 'Status: Critical'));
												} else if ( state == 2 )
												{
													graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, '#ffff00', [cell]);
													graph.addCellOverlay(cell, createOverlay({src: "/web/vendor/mxgraph/src/images/status/progress/yellow.svg", width: 60, height: 35}, 'Status: Warning'));
												} else if ( state == 0 )
												{
													graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, '#dddddd', [cell]);
													graph.addCellOverlay(cell, createOverlay({src: "/web/vendor/mxgraph/src/images/status/progress/grey.svg", width: 60, height: 30}, 'Status: Unknown'));
												} else
												{ 
													graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, '#0ad615', [cell]);
													graph.addCellOverlay(cell, createOverlay({src: "/web/vendor/mxgraph/src/images/status/progress/normal.svg", width: 60, height: 30}, 'Status: Normal'));
												}
												
											}
										}
									} 
								}
								finally
								{
									model.endUpdate();
								}
							}
						}
					}
				}

				var loadStatus = function(event){
					var rtn = 0;
					
					jQuery.ajax({
					  	url: '/mxobject/search',
					  	type: 'POST',
					  	dataType: 'json',
					  	async: false,
					  	data: {
					  		cond: `#/matrix/entity/: | id=`+ event +` | print status`,
					  		flag: false
					  	},
					  	complete: function(xhr, textStatus) {
					    	//called when complete
					  	},
					  	success: function(data, textStatus, xhr) {
					  		
					  		if(!_.isEmpty(data.message)){
					  			rtn = data.message[0].status;	
					  		}
					  	},
					  	error: function(xhr, textStatus, errorThrown) {
					    	if(textStatus === 'timeout')
					        {     
					            console.log('Failed from timeout');
					        }
					  	},
					  	timeout: 5000
					});
					
					return rtn;
				}

				var createOverlay = function (image, tooltip)
				{
					var overlay = new mxCellOverlay(image, tooltip, 'center', 'top');

					// Installs a handler for clicks on the overlay
					overlay.addListener(mxEvent.CLICK, function(sender, evt)
					{
						//swal("异常，请确认!","","warning");//mxUtils.alert(tooltip + '\nLast update: ' + new Date());
					});
					
					return overlay;
				}

			}, function()
			{
				document.body.innerHTML = '<center style="margin-top:10%;">Error loading resource files. Please check browser console.</center>';
			});
		})();

	</script>

	<script type="text/x-template" id="config-component-template">
		<div class="panel-group" id="config-accordion" role="tablist" aria-multiselectable="true">
		  	<div class="panel panel-default">
		  		<div class="panel-heading">
                    <div class="panel-heading-btn pull-right">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-wrench" @click="updateHandler(model)"><i class="fa fa-wrench"></i></a>
                    </div>
                    <h4 class="panel-title">
                    	<a class="collapsed" role="button" data-toggle="collapse" data-parent="#config-accordion" href="#config-normal-win" aria-expanded="false" aria-controls="config-normal">
				        	Normal
				        </a>
                    </h4>
                </div>
			    <div id="config-normal-win" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="config-normal">
			    	<div class="input-group input-group-sm" style="width:100%;" v-for="item in model.normal">
				      <div class="input-group-addon" :id="item.name" style="width:130px;text-align: right;border:0px;border-bottom: 1px solid #ccc;border-radius: 0px;background-color:#f7f7f7;">${item.title}</div>
				      <textarea class="form-control" :id="item.name" :placeholder="item.title" style="border:0px;border-left: 1px solid #ccc;border-bottom: 1px solid #ccc;">${item.value}</textarea>
				    </div>
			    </div>
		  	</div>
		  	<div class="panel panel-default">
		  		<div class="panel-heading">
                    <div class="panel-heading-btn pull-right">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-wrench" @click="updateHandler(model)"><i class="fa fa-wrench"></i></a>
                    </div>
                    <h4 class="panel-title">
                    	<a class="collapsed" role="button" data-toggle="collapse" data-parent="#config-accordion" href="#config-details-win" aria-expanded="false" aria-controls="config-details">
				        	Interface
				        </a>
                    </h4>
                </div>
			    <div id="config-details-win" class="panel-collapse collapse" role="tabpanel" aria-labelledby="config-details">
			      	<div class="input-group input-group-sm" style="width:100%;" v-for="item in model.elements">
				      	<div class="input-group-addon" :id="item.name" style="width:80px;border:0px;border-bottom: 1px solid #ccc;border-radius: 0px;background-color:#f7f7f7;">${item.title}</div>
				      	<textarea class="form-control" :id="item.name" :placeholder="item.title" style="border:0px;border-left: 1px solid #ccc;border-bottom: 1px solid #ccc;">${item.value}</textarea>
				    </div>
			    </div>
		  	</div>
		  	<div class="panel panel-default">
		  		<div class="panel-heading">
                    <div class="panel-heading-btn pull-right">
                        <span class="btn btn-xs btn-default fileinput-button">
		                    <i class="fa fa-plus"></i>
		                    <input id="fileupload" type="file" name="files[]" multiple>
		                </span>	
                    </div>
                    <h4 class="panel-title">
                    	<a class="collapsed" role="button" data-toggle="collapse" data-parent="#config-accordion" href="#config-attached-win" aria-expanded="false" aria-controls="config-attached">
				        	Attachment
				        </a>
                    </h4>
                </div>
			    <div id="config-attached-win" class="panel-collapse collapse" role="tabpanel" aria-labelledby="config-attached">
			      	<div class="row">
			            <div class="col-lg-12">
			                <div id="progress" class="progress">
			                    <div class="progress-bar progress-bar-success"></div>
			                </div>
			                <!-- The container for the uploaded files -->
			                <div id="files" class="files"></div>  
			            </div>
			        </div>
			    </div>
		  	</div>
		</div>
	</script>
</body>
</html>
