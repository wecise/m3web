{{template "base/head" .}}

<style type="text/css" media="screen">
    
    .container-fluid {
        margin-top: 10%;
    }

    .panel {
        background-color: transparent;
        border: 0px;
        -webkit-box-shadow: 0 0px 0px rgba(0, 0, 0, .05);
        box-shadow: 0 0px 0px rgba(0, 0, 0, .05);
    }

    mark {
        background-color: rgba(253, 245, 154, 0.6);
    }

    .btn-primary.focus, .btn-primary:hover {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .btn-primary.focus, .btn-primary:focus {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .btn-primary.focus, .btn-primary:active {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .tile {
        width: 100px;
        min-width: 100px;
        min-height:  70px;
        max-height:  70px;
        color: #FFFFFF;
        padding: 10px 10px;
        text-align: center;
        margin-top: 10px;
        margin-left: 5px;
        margin-right: 5px;
        background-color: #03a9f4;
        display: inline-block;
        vertical-align: top;
        -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
    }
    .tile_name {
        cursor: pointer;
        padding-bottom: 0px;
        border-bottom: 0px solid rgba(255,255,255,.2);
    }

    .tile__list {
        margin-top: 10px;
        margin-bottom: 10px;
    }
    .tile__list:last-child {
        margin-right: 0;
        min-height: 80px;
    }

    .tile__list img {
        cursor: move;
        margin: 10px;
        border-radius: 100%;
    }

    .tile_plus{
        min-height:  70px;
        max-height:  70px;
        display: block;
        text-align: center;
        margin: -10px -12px;
        background-color: #e9eaf0;
        color: #949599;
        width: 15%;
        min-width: 100px;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        border: 0px dashed rgba(0,0,0,.5);
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    a:hover{
        text-decoration: none;
        cursor: hand;
    }

    .search{
        border-radius: 0px;
        -webkit-box-shadow: inset 0 0px 0px rgba(0,0,0,.075);
        ox-shadow: inset 0 0px 0px rgba(0,0,0,.075);
        -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
        -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
        height: 36px;
    }
    
    /*----------  Search Result Panel  ----------*/
    #search-result-panel {
        overflow: auto;
        height: 50vh;
        position: relative;
        min-width: 75vw;
        margin-right:75px;
        border:1px solid #f0f3f4;
        border-top:1px solid #f0f3f4;
        background-color:#FFFFFF;
        margin-top: 8px;
    }
    #search-result-panel:after {
        bottom: 100%;
        left: 5%;
        border: 1px solid #f0f3f4;
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
        border-color: rgba(247, 247, 247, 0);
        border-bottom-color: #f0f3f4;
        border-width: 8px;
        margin-left: -30px;
    }

    .search-result-row:not(:last-child) {
        margin: 0px 0px 1px 0px;
        background-color: #f0f3f4;
        min-height: 32px;
        padding: 5px;
        color: #8f99a0;
    }

    .search-result-row:last-child {
        margin: 0px;
        background-color: #f0f3f4;
        min-height: 32px;
        padding: 5px;
        color: #8f99a0;
    }


    /* ----------------------- For Plus Button ----------------------- */
    .nav-secondary-plus {
      display: block;
      text-align: center;
      padding: 3px 3px;
      background-color: #e9eaf0;
      color: #949599;
      width: 90px;
      height: 75px;
      -webkit-border-radius: 5px;
      -moz-border-radius: 5px;
      border-radius: 5px;
      border: 1px dashed rgba(0,0,0,.5);
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    .nav-secondary-plus a span {
      display: block;
      font-size: 20px;
      font-weight: normal;
      line-height: normal;
      margin: 15px auto 0;
    }

    .nav-secondary-plus a:hover,
    .nav-secondary-plus .active a {
      text-decoration: none;
      background-color: #389abe;
      color: #ffffff;
      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    }
    .nav-secondary-plus.inverse a {
      background-color: #389abe;
      color: #ffffff;
      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    }
    .nav-secondary-plus.inverse a:hover,
    .nav-secondary-plus.inverse .active a {
      background-color: #e9eaf0;
      color: #949599;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    /* For App Button */
    .layer.btn.btn-primary{
        padding: 10px 5px 0px 5px;
        margin: 5px;
        min-width: 120px;
        max-width: 120px;
        height: 80px;
        background-color: #242d47;
        border-radius: 3px;
    }

    .layer.select.btn.btn-primary{
        padding: 5px 5px 0px 5px;
        margin: 5px;
        min-width: 120px;
        max-width: 120px;
        height: 80px;
        background-color: #242d47;
        border-radius: 3px;
    }

    .layer .list-context-menu {
        position: relative;
        right: -45px;
        bottom: 5px;
    }

    .sidebar,
    .sidebar-bg,
    .sidebar-toggle,
    .input-group.full-width.topbar{
        display:none;
    }

</style>
<div id="content" class="content">
    <div id="app"></div>
</div>

<!-- Sortable JS-->
<script src="{{AppSubUrl}}/web/vendor/Sortable/Sortable.min.js"></script>

<link rel="vc" href="{{AppSubUrl}}/web/component/vue-search-preset-component_{{.Lang}}.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-editor-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/ai/ai-robot-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-apps-box-component.html"></link>
<!--<link rel="vc" href="{{AppSubUrl}}/web/component/vue-home-component.html"></link>-->

<script src="{{AppSubUrl}}/web/vendor/jquery/jquery-migrate-1.1.0.min.js"></script>
<script src="{{AppSubUrl}}/web/css/color/apps.min.js"></script>

<script src="{{AppSubUrl}}/web/js/model/Home.js"></script>
<script src="{{AppSubUrl}}/web/js/model/Robot.js"></script>

<script type="text/x-template" id="app-template">
    <el-container style="padding:3em 0;">
            <el-main>
                {{.CsrfTokenHtml}}
                
                <el-row :gutter="20" style="padding:20px 0px;">
                    <el-col :span="18" :offset="3">
                        <div class="grid-content">
                            <div class="input-group">
                                <!--div class="input-group-btn">
                                    <a href="javascript:void(0)" @click="openHelpPanel" class="btn btn-xs btn-help" style="background-color: rgb(240, 243, 244);border-top: 1px solid rgb(204, 204, 204);border-right: none;border-bottom: 1px solid rgb(204, 204, 204);border-left: 1px solid rgb(204, 204, 204);border-image: initial;width: 24px;height: 36px;border-radius: 0px;padding: 10px 5px;">
                                        <i class="fa fa-question"></i>
                                    </a>
                                </div-->
                                <input class="form-control search" type="text" placeholder='{{.i18n.Tr "search.search"}}' @click="hideSearch" style="border: 1px solid #b6c2ca;border-left:none;">
                                <div class="input-group-btn">
                                    <vue-search-preset-component id="home-vue-search-preset" :preset="search.preset"></vue-search-preset-component>
                                </div>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-primary" @click="onSearch"><i class="fa fa-search" style="font-size:20px;"></i></button>
                                </div>
                            </div>
                            <!-- /.input-group -->
                            <div class="collapse collapseShowresult" id="search-result-panel" v-on:blur="hideSearch">
                                <div id="search-result-content"></div>
                            </div>
                        </div>
                    </el-col>
                </el-row>
                
                <el-row :gutter="20" style="padding:20px 0px;">
                    <el-col :span="16" :offset="4"> 
                        <div class="grid-content">
                            <div class="layer btn btn-primary animated flipInX" v-for="item in user.apps">
                                <a :href="item.url" :target="item.target" style="color:#ffffff;">
                                    <div class="tile_name">
                                        <img style="width:30px" :src="item.icon | pickIcon"></img>
                                        <p class="small">#{item.{{.i18n.Tr "mxhome_portlet_name"}}}#</p>
                                    </div>
                                </a>
                                <div class="list-context-menu" :data-item="item.url">
                                    <i class="fa fa-angle-down"></i>
                                </div>
                            </div>
                            <a class="layer btn btn-primary" href="#addAppModal" data-toggle="modal" style="background-color:#e9eaf0;padding: 24px 25px;border: none;margin-left: 5px;min-width: 110px;">
                                <span class="fa fa-plus" style="font-size: 20px;"></span>
                            </a>
                        </div>
                    </el-col>
                </el-row>
                
                <div class="modal fade" id="addAppModal" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="exampleModalLabel">{{.i18n.Tr "add_app"}}</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <a href="javascript:void(0);" :target="item.target" class="layer select btn btn-primary" v-for="item in user.appList" @click="triggerInput(item.name)">
                                            <img :src="item.icon | pickIcon" style="width:28px;"></img>
                                            <p class="small">
                                                #{item.{{.i18n.Tr "mxhome_portlet_name"}}}#
                                            </p>
                                            <p>
                                                <input type="checkbox" :ref="item.name" v-model='item.selected' @click="toogle(item)">
                                            </p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </el-main>
    
        </el-container>
</script>

<script type="text/x-template" id="search-result-content-template">
    <div>
        <div class="row search-result-row" 
             v-for="item in model">
            <div class="col-lg-4">
                {{.i18n.Tr "mxsearch_search_result_class"}}
                <p>${item.name}</p>
            </div>
            <div class="col-lg-2">
                {{.i18n.Tr "mxsearch_search_result_count"}}
                <p>${item.count}</p>
            </div>
            <div class="col-lg-5">
                {{.i18n.Tr "mxsearch_search_daterange"}}
                <p>${item.from} - ${item.to}</p>
            </div>
            <div>
                <a href="#" class="btn btn-xs btn-default btn-copy" @click="copyToClipBoard" alt="拷贝到剪切板" title="拷贝到剪切板" style="height: 22px;"><i class="fa fa-clipboard"></i></a>
            </div>
            <div class="col-lg-12" style="display:none;">
                <div class="panel">
                    <div class="panel-body">
                        ${JSON.stringify(item.list)}
                    </div>
                </div>
            </div>
        </div>
    </div>


</script>

{{template "base/footer" .}}
