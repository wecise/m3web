{{template "base/head" .}}


<style>

    body{
        overflow:hidden;
    }

    #page-container{
        height: 100%;
    }

    #content {
        height: 100%;
        overflow: auto;
    }

    #editor div {
        display: inline-block;
        width: 100%;
        height: 100%;
        vertical-align: top;
        box-sizing: border-box;
        padding: 0 20px;
    }

</style>

<div id="app"></div>


<script type="text/javascript">

    VueLoader.onloaded([],function() {

        const URL_PARAMS_ITEM = _.attempt(JSON.parse.bind(null, decodeURIComponent(window.atob(urlParams['item']))));
        const URL_PARAMS_CFG = _.attempt(JSON.parse.bind(null, decodeURIComponent(window.atob(urlParams['cfg']))));

        let init = function(){

            _.forEach(URL_PARAMS_CFG,function(v,k){
                if(!v){
                    //$(`#${k}`).hide();
                }
            })

        }();

        $(function() {

            let appVue = new Vue({
                delimiters: ['${', '}'],
                el: '#app',
                template: '#app-template',
                data: {
                    model: {
                        content: null
                    }
                },
                mounted: function() {
                    let self = this;

                    self.$nextTick(function() {
                        self.init();
                    })
                },
                created: function() {
                    let self = this;


                },
                methods: {
                    init: function(){
                        let self = this;

                        let rtn = fsContent(URL_PARAMS_ITEM.parent,URL_PARAMS_ITEM.name);
                        self.model.content = marked(rtn, { sanitize: true });
                    }
                }
            });


        })
    })

</script>

<script type="text/x-template" id="app-template">
    <div id="content" class="content editor">
        <div v-html="model.content"></div>
    </div>
</script>

{{template "base/footer" .}}
