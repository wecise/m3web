<!--

    [[[[[[[[[[[[[[[      ]]]]]]]]]]]]]]]
    [::::::::::::::      ::::::::::::::]
    [::::::::::::::      ::::::::::::::]
    [::::::[[[[[[[:      :]]]]]]]::::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[    CODE BY WANGZD    ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [::::::[[[[[[[:      :]]]]]]]::::::]
    [::::::::::::::      ::::::::::::::]
    [::::::::::::::      ::::::::::::::]
    [[[[[[[[[[[[[[[      ]]]]]]]]]]]]]]]

-->
{{template "base/head" .}}
<!--MXClient JS & CSS-->
<script>
	mxBasePath = '{{AppSubUrl}}/web/creative/src';
	mxLanguage = window.MATRIX_LANG.replace(/en/g,"eg").split("-")[0];
</script>

<script src="{{AppSubUrl}}/web/creative/src/js/mxClient.js" type="text/javascript"></script>
<link href="{{AppSubUrl}}/web/creative/graph/styles/grapheditor.css" type="text/css" rel="stylesheet">

<script>
    mxResources.add('{{AppSubUrl}}/web/creative/graph/resources/grapheditor');
</script>
<!-- zTree Core CSS -->
<link href="{{AppSubUrl}}/web/vendor/zTree/css/systemStyle/zTreeStyle.css" type="text/css" rel="stylesheet">


<style>

	/* body */
	body {
		overflow:hidden;
	}

	/* content */
	#content {
		padding: 10px;
	}

	/* Event view */
	.event-view .tree-view {
		padding: 0 15px;
	}

	/* 运维模式 */
	.event-view.view-normal .tree-view {
		display: none;
		width: 0%;
	}
	.event-view.view-normal .table-view {
		width: 100%;
	}

	/* 标签树模式 */
	.event-view.view-tags .tree-view {
		width: 18%;
	}
	.event-view.view-tags .table-view {
		width: 82%;
	}

	/* 全屏模式 */
	.event-view.view-fullscreen .tree-view {
		display: none;
		width: 0%;
	}
	.event-view.view-fullscreen .table-view {
		width: 100%;
	}

	/* timeline view */
	.timeline-view {
		background: rgb(250, 250, 250);
	}

	/* table view */
	.table-view {
		padding-top: 10px!important;
	}


	/* nav nav-tabs nav-tabs-line-2px li a */
	.panel-title-btn .nav-tabs-line-2px{
		margin: 0 -15px;
	}
	.panel-title-btn .nav-tabs-line-2px > li > a {
		padding: 0px 15px
	}

	/* 自定义Panel */
	.panel.panel-default.panel-white-border {
		margin-bottom: 10px;
		border: 1px solid rgb(250, 250, 250);
	}

	.panel-white-border .panel-heading .nav-tabs {
		margin-left: -13px;
		margin-top: -8px;
		margin-right: -15px;
	}

	.panel-white-border .panel-title{
		height: 18px;
	}
	.panel-white-border .panel-body {
		padding:0 10px;
	}

	/* grid */
	.masonry-column {
		padding: 0 1px;
	}

	.masonry-grid > div .panel-white-border {
		margin: 5px 1px;
	}

	/* 告警详情页Tab */
	.nav-tabs.event-detail-data-ul > li {
		position:relative;
	}
	.nav-tabs.event-detail-data-ul > li > a {
		display:inline-block;
	}
	.nav-tabs.event-detail-data-ul > li > span {
		display:none;
		cursor:pointer;
		position:absolute;
		right: 6px;
		top: 8px;
		color: red;
	}
	.nav-tabs.event-detail-data-ul > li:hover > span {
		display: inline-block;
	}

	.nav-tabs.event-detail-data-ul > li > span {
	    display:none;
	    cursor:pointer;
	    position:absolute;
	    right: 3px;
	    top: 8px;
	    color: #999;
	}

</style>

<div id="app"></div>

<script src="{{AppSubUrl}}/web/js/model/Event.js"></script>

<!--zTree Core JS-->
<script src="{{AppSubUrl}}/web/vendor/zTree/js/jquery.ztree.core-3.5.js"></script>
<script src="{{AppSubUrl}}/web/vendor/zTree/js/jquery.ztree.excheck-3.5.js"></script>
<script src="{{AppSubUrl}}/web/vendor/zTree/js/jquery.ztree.exedit-3.5.js"></script>

<!-- ECharts单文件引入 --> 
<script src="{{AppSubUrl}}/web/vendor/echart/echarts.min.js"></script>

<link rel="vc" href="{{AppSubUrl}}/web/component/ai/ai-robot-component.vue"></link>

<link rel="vc" href="{{AppSubUrl}}/web/component/event/event-datatable-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/event/event-diagnosis-datatable-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/event/event-graph-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/event/event-summary-component.html"></link>

<link rel="vc" href="{{AppSubUrl}}/web/component/search/search-base-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/search/search-preset-component_{{.Lang}}.html"></link>

<link rel="vc" href="{{AppSubUrl}}/web/component/probe/probe-tree-component.html"></link>


<script type="text/x-template" id="app-template">
	<div id="content" class="content">

		<div class="row search">
			<div class="col-md-12">
				<search-base-component :id="model.id"
				                       :options="options"
				                       ref="searchRef"></search-base-component>
			</div>
		</div>

		<div class="row event">
			<div class="col-md-12">
				<ul class="nav nav-tabs nav-tabs-bottom-2px event-ul" role="tablist">
					<li class="active">
						<a href="#event-view" role="tab" data-toggle="tab" title="告警列表" data-tooltip="tooltip" @click="toggleView($event)">告警列表</a>
					</li>
				</ul>
				<div class="tab-content event-div">
					<div class="active tab-pane fade in" id="event-view">
						<event-view id="event-list"
						            :model="model.message"
						            transition="fade" transition-mode="out-in" ref="eventListRef"></event-view>
				    </div>
				</div>
			</div>

		</div>

	</div>
</script>

<script type="text/x-template" id="event-view-timeline-template">
	<div>${id}</div>
</script>

<script type="text/x-template" id="event-view-radar-template">
	<event-summary-component id="event-radar"></event-summary-component>
</script>

<script type="text/x-template" id="event-view-template">
	<div style="margin:0px -15px;">
		<div class="col-md-12 col">
			<div class="panel panel-default panel-white-border" data-sortable-id="ui-modal-notification-1">
				<div class="panel-heading">
					<div class="panel-heading-btn">
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-expand"><i class="fa fa-expand"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-reload"><i class="fa fa-sync-alt"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
						<!--<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-remove"><i class="fa fa-times"></i></a>-->
					</div>
					<div class="panel-title-btn">
						<ul class="nav nav-tabs nav-tabs-content pull-left">
							<li role="presentation">
								<a href="#event-view-timeline" role="tab" data-toggle="tab" title="时间轴" data-tooltip="tooltip">时间序列</a>
							</li>
							<li role="presentation" class="active">
								<a href="#event-view-radar" role="tab" data-toggle="tab" title="告警雷达" data-tooltip="tooltip">告警雷达</a>
							</li>
						</ul>
					</div>
					<h4 class="panel-title"></h4>
				</div>
				<div class="panel-body" style="height:20vh;">
					<div class="row">
						<div class="col-md-12 timeline-view">

							<div class="tab-content">
							  <div class="tab-pane fade in" id="event-view-timeline">

							  </div>
								<div class="tab-pane fade in active" id="event-view-radar">
									<event-summary-component id="event-radar" ref="eventSummaryRef"></event-summary-component>
							  </div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-12">
			<div class="panel panel-default panel-white-border" data-sortable-id="ui-modal-notification-2">
				<div class="panel-heading">
					<div class="panel-heading-btn">
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-expand"><i class="fa fa-expand"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-reload"><i class="fa fa-sync-alt"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
						<!--<a href="javascript:;" class="btn btn-xs btn-icon" data-click="panel-remove"><i class="fa fa-times"></i></a>-->
					</div>
					<h4 class="panel-title"></h4>
				</div>
				<div class="panel-body event-list-wrapper" style="height:42vh;">
					<div class="row">
						<div class="col-md-2 tree-view animated fadeInRight">
							<probe-tree-component id="event-tree" :model="{parent:'/event',name:'event_tree_data.js',domain:'event'}"></probe-tree-component>
						</div>
						<div class="col-md-10 table-view animated fadeInLeft">
							<event-datatable-component :id="id" :model="model"></event-datatable-component>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</script>

{{template "base/footer" .}}
