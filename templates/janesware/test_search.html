<!--

    [[[[[[[[[[[[[[[      ]]]]]]]]]]]]]]]
    [::::::::::::::      ::::::::::::::]
    [::::::::::::::      ::::::::::::::]
    [::::::[[[[[[[:      :]]]]]]]::::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[    CODE BY WANGZD    ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [:::::[                      ]:::::]
    [::::::[[[[[[[:      :]]]]]]]::::::]
    [::::::::::::::      ::::::::::::::]
    [::::::::::::::      ::::::::::::::]
    [[[[[[[[[[[[[[[      ]]]]]]]]]]]]]]]

-->
{{template "base/head" .}}


<link rel="vc" href="{{AppSubUrl}}/web/component/search/search-base-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/search/search-preset-component_{{.Lang}}.html"></link>

<style>


</style>

<div id="app"></div>

<!-- ECharts单文件引入 --> 
<script src="{{AppSubUrl}}/web/vendor/echart/echarts.min.js"></script>

<script type="text/javascript">

    VueLoader.onloaded(["search-preset-component","search-base-component"],function() {

        $(function(){

            let appVue = new Vue({
                delimiters: ['${', '}'],
                el: "#app",
                template: "#app-template",
                data: {
					model: {
					    id: "matrix-search",
					    filter: null,
                        input: null,
                        preset: null,
                        message: null,
						term: null
					}
                },
                watch:{
					'model.message':{
					    handler:function(val,oldVal){
					        console.log(1,val)
					    },
						deep: true
					}
                },
                mounted: function(){
                    let self = this;

                    self.$nextTick(function () {


                    })
                },
                created: function(){
                    let self = this;

                    // 接收搜索数据
                    eventHub.$on(`SEARCH-RESPONSE-EVENT-${this.model.id}`,function(event) {
                        self.model = _.extend(self.model, self.$refs.search.result) ;
                    });
                },
                methods: {

                }
            })

        })
    });

</script>

<script type="text/x-template" id="app-template">
	<main id="content" class="content">
		<div class="container">
			<search-base-component :id="model.id" ref="search"></search-base-component>
			<BR/><BR/>
			<textarea rows="6">${JSON.stringify(model.term)}</textarea>
			<textarea rows="6">${JSON.stringify(model.preset)}</textarea>
			<textarea rows="6">${JSON.stringify(model.message)}</textarea>

		</div>
	</main>
</script>

{{template "base/footer" .}}
