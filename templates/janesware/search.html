{{template "base/head" .}}

<!-- sweetalert core CSS -->
<link href="{{AppSubUrl}}/web/vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">

<style type="text/css" media="screen">

	body {
		overflow: hidden;
		height: 100vh;
		margin-top: 20px;
	}

	#page-container{
		overflow: hidden;
		height: 100%;
	}

	#content.content{
		margin: 0px 0px 0px 60px;
		padding: 5px;
		overflow-y:auto;
		height: 100%; 
	}
	
	.vue-search-input-component input{
		height: 34px!important;
	}
	.vue-search-input-component .quick{
		display: none;
	}

	.panel{
		border-radius: 5px!important;
	}

	.panel-body {
		padding:0px;
	}

	.well {
		border: 1px solid rgb(226, 231, 236);
	    border-radius: 2px;
	    -webkit-box-shadow: inset 0 0px 0px rgba(0,0,0,.05);
	    box-shadow: inset 0 0px 0px rgba(0,0,0,.05);
	    background-color: #ffffff;
		margin-bottom: 10px;
		padding: 0px 15px 10px 15px;
	}

	.btn.dropdown-toggle {
		padding: 7px 12px;
		border-radius: 0px;
	}

	.vue-search-input-component > .btn-group > .btn.dropdown-toggle {
		border-bottom: 2px solid rgb(182, 194, 202);
	}

	code {
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
    }
	
	.btn-primary {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .btn.dropdown-toggle {
	    padding: 7px 12px;
	}
    
    .btn-primary.focus, .btn-primary:hover {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .btn-primary.focus, .btn-primary:focus {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }

    .btn-primary.focus, .btn-primary:active {
        color: #fff;
        background-color: #03a9f4;
        border-color: #03a9f4;
    }
  	
  	#table-log > .bootstrap-table > .fixed-table-container tbody td {
        border-left: none;
    }

    #table-log > .bootstrap-table > .fixed-table-container tbody > tr > td:nth-child(2) {
        white-space: nowrap!important;
        text-align: center;
    }

    /*----------  Event Severity For Cell Color  ----------*/
	td.severity6 {
	  background-color: #333333!important; /*Fatal*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity5 {
	  background-color: #FF0000!important; /*Critical*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity4 {
	  background-color: #FFA500!important; /*Major*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity3 {
	  background-color: #FFD700!important; /*Minor*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity2 {
	  background-color: #0000FF!important; /*Warning*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity1 {
	  background-color: #800080!important; /*Indeterminate*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity0 {
	  background-color: #008000!important; /*Clear*/
	  text-align: center;
	  color: #ffffff;
	}
	td.severity_1 {
	  background-color: #808080!important; /*Unknown*/
	  text-align: center;
	  color: #ffffff;
	}

	/* For list-view */
	#list {
		padding-left:0px;
		flex-flow: nowrap;
		display: flex;
		flex-direction: column;
	}

	#list ul{
		padding-left: 0;
		list-style: none;
	}

	#list ul > li{
		width: 20em;
		float: left;
		height: 250px;
		padding: 5px;
		font-size: 10px;
		line-height: 1;
		text-align: center;
	}

	#list ul > li img {
		width: 64px;
	}

	#list .bg-silver {
		background: rgb(255, 255, 255) !important;
		border: 1px solid rgb(221, 221, 221);
	}

	#list .widget-stats.bg-silver .stats-link a{
		background: rgb(249, 249, 249);
	}

	#list .tags{
		border: none;
	}

	#list .fs-name i {
		color: rgb(153, 153, 153);
	}

	/* widget */
	.widget-stats.bg-info:hover,.widget-stats.bg-info.active {
        box-shadow: 2px 2px 20px 2px #999999;
        background-color: rgb(255, 255, 255)!important;
        /*background-image: linear-gradient(to bottom, rgb(255, 255, 255) 0%, rgb(239, 239, 239) 100%)!important;*/
    }

    .widget-stats.bg-grey:hover,.widget-stats.bg-grey.active {
        box-shadow: 2px 2px 2px 2px #999;
        background-color: rgb(183, 190, 208)!important;
        background-image: linear-gradient(to bottom, rgb(182, 194, 202) 0%, rgb(244, 244, 244) 100%)!important;
    }
	#content .bg-info.dir {
        background: rgb(255, 255, 255);
        background: -moz-linear-gradient(top, #b2e1ff 0%, #66b6fc 100%);
        background: -webkit-linear-gradient(top, rgb(255, 255, 255) 0%,rgb(235, 235, 235) 100%);
        background: linear-gradient(to bottom, rgb(255, 255, 255) 0%,rgb(235, 235, 235) 100%);
    }

    #content .bg-info {
        background: rgb(255, 255, 255);
        background: -moz-linear-gradient(top, #b2e1ff 0%, #66b6fc 100%);
        background: -webkit-linear-gradient(top, rgb(178, 225, 255) 0%,rgb(102, 182, 252) 100%);
        background: linear-gradient(to bottom, rgb(255, 255, 255) 0%,rgb(201, 233, 249) 100%);
    }

    #content .col-md-3 {
        width: 25%;
        max-width: 350px;
        min-width: 310px;
        padding-left: 5px;
        padding-right: 5px;
    }

    #content .fa-wrench{
        color: #999999;
    }

    .widget-stats .stats-desc, .widget-stats .stats-title {
        color: rgb(0, 0, 0);
    }

    @media screen and (max-width: 2560px) {

        #content .stats-title {
            font-family: 'microsoft yahei';
            font-size: 22px;
            color: rgb(0, 0, 0);
            line-height: 25px;
            overflow-x: auto;
            overflow-y: hidden;
            max-height: 36px;
            cursor: pointer;

            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: 13.5em;
        }
    }

    @media screen and (max-width: 1960px) {

        #content .stats-title {
            font-family: 'microsoft yahei';
            font-size: 22px;
            color: rgb(0, 0, 0);
            line-height: 25px;
            overflow-x: auto;
            overflow-y: hidden;
            max-height: 36px;
            cursor: pointer;

            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: 13.5em;
        }
    }

    @media screen and (max-width: 1280px) {

        #content .stats-title {
            font-family: 'microsoft yahei';
            font-size: 22px;
            color: rgb(0, 0, 0);
            line-height: 25px;
            overflow-x: auto;
            overflow-y: hidden;
            max-height: 36px;
            cursor: pointer;

            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: 12em;
        }
    }

    #content .stats-subtitle{
        font-size:12px;
        color: #999999;
        line-height: 25px;
        overflow: hidden;
        max-height: 46px;
        min-height: 46px;
        cursor: pointer;

        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2
    }

    #content .media {
        cursor: pointer;
        margin-bottom: 0px;
    }

    #content .media-body{
        color: #999999;
    }

    #content .media-body p{
        margin: 0px 0px 3px 20px;
    }

    #content .media-object{
        max-width:75px;
        min-width:60px;
    }

    #content .stats-desc {
        display: -webkit-box;
        margin: 0px -15px -15px -15px;
        background-color: rgb(247, 247, 247);
        padding: 5px 10px;
        border-top: 0.5px solid rgb(240, 243, 244);
        color: rgb(124, 124, 124)!important;
    }

    #content .stats-desc .fa-wrench {
        color: rgb(144, 144, 144);
    }

    #content .stats-desc .status {
        right: -73%;
        position: relative;
        color: rgb(124, 124, 124)!important;
    }

	.col-lg-12 .widget-stats{
        border: 1px solid rgb(229, 229, 229);
        border-radius: 10px;
        max-height: 210px;
        min-height: 205px;
    }

    .col-lg-10 .widget-stats{
        border: 1px solid rgb(240, 240, 240);
        border-radius: 10px;
        max-height: 210px;
        min-height: 200px;
    }

</style>

<div id="app"></div>

<script src="{{AppSubUrl}}/web/js/model/Robot.js"></script>

<!-- sweetalert core JS -->
<script src="{{AppSubUrl}}/web/vendor/sweetalert2/dist/sweetalert2.min.js"></script>

<!-- ECharts单文件引入 -->
<script src="{{AppSubUrl}}/web/vendor/echart/echarts.min.js"></script>

<!-- Bootstrap Table CSS -->
<link href="{{AppSubUrl}}/web/vendor/table/bootstrap/bootstrap-table.min.css" rel="stylesheet">
<link href="{{AppSubUrl}}/web/vendor/table/export/bootstrap-editable.css" rel="stylesheet">
<link href="{{AppSubUrl}}/web/vendor/table/bootstrap/bootstrap-table-fixed-columns.css" rel="stylesheet">
<link href="{{AppSubUrl}}/web/vendor/table/dragtable/dragtable.css" rel="stylesheet">

<!--Bootstrap Table JS-->
<script src="{{AppSubUrl}}/web/vendor/table/dragtable/dragtable.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/bootstrap-table.min.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/locale/bootstrap-table-{{.i18n.Tr "bootstrap_table_locate"}}.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/extensions/export/bootstrap-table-export.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/extensions/export/tableExport.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/extensions/reorder-columns/bootstrap-table-reorder-columns.min.js"></script>
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/extensions/editable/bootstrap-table-editable.js"></script>
<!--script src="{{AppSubUrl}}/web/vendor/table/export/bootstrap-table-editable.js"></script-->
<!--script src="{{AppSubUrl}}/web/vendor/table/export/bootstrap-editable.js"></script-->
<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/bootstrap-table-contextmenu.min.js"></script>
<!--<script src="{{AppSubUrl}}/web/vendor/table/bootstrap/bootstrap-table-fixed-columns.js"></script>-->

<link rel="vc" href="{{AppSubUrl}}/web/component/vue-timeline-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-editor-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-search-input-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-search-preset-component_{{.Lang}}.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-bootstrap-table.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-common-form-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/vue-object-detail-component.html"></link>
<link rel="vc" href="{{AppSubUrl}}/web/component/ai/ai-robot-component.html"></link>

<link rel="vc" href="{{AppSubUrl}}/web/component/event/event-datatable-component.html"></link>

<script>
	
	VueLoader.onloaded(["vue-bootstrap-table",
						"vue-timeline-component",
						"vue-editor-component",
						"vue-search-preset-component",
						"vue-search-input-component",
						"vue-common-form-component",
						"vue-object-detail-component",
						"ai-robot-component",
						"event-datatable-component"],function() {

		$(function(){

			moment().format('LLL');

			var current_class_path = "/matrix/devops/performance";
					
			Vue.component('search-event', {
				delimiters: ['${', '}'],
	            template: "#search-event-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            data: function(){
	            	return {
	            		search: {
	            			default: ""
	            		}
	            	}
	            },
	            created: function(){
	            	let self = this;
	            },
	            mounted: function(){
	            	let self = this;

					self.$nextTick(function () {
						$(self.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	let self = this;

				    	if(val){
				    		$(self.$el).css("display","");
				    	} else {
				    		$(self.$el).css("display","none");
				    	}
				    }
				},
				methods: {	
				
				}
	        });

	        Vue.component('search-syslog', {
				delimiters: ['${', '}'],
	            template: "#search-syslog-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            data: function(){
	            	return {
	            		search: {
	            			default: ""
	            		}
	            	}
	            },
	            created: function(){
	            	let self = this;
	            },
	            mounted: function(){
	            	let self = this;

					self.$nextTick(function () {
						$(self.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	let self = this;

				    	if(val){
				    		$(self.$el).css("display","");
				    	} else {
				    		$(self.$el).css("display","none");
				    	}
				    }
				},
				methods: {	
				
				}
	        }); 

	        Vue.component('search-journal', {
				delimiters: ['${', '}'],
	            template: "#search-journal-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('search-log', {
				delimiters: ['${', '}'],
	            template: "#search-log-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('search-raw', {
				delimiters: ['${', '}'],
	            template: "#search-raw-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('search-tickets', {
				delimiters: ['${', '}'],
	            template: "#search-tickets-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('search-change', {
				delimiters: ['${', '}'],
	            template: "#search-change-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('bootstrap-table-search', {
	            template: `<table></table>`,
	            props:{
	                columns: Array,
	                data: Array,
	                options: Object,
	                forward: String
	            },
	            mounted: function () {
	                const self = this;

	                self.$nextTick(function () {
	                    $(self.$el).bootstrapTable(_.extend({
	                                            data: self.data,
	                                            columns: self.columns
	                                        }, self.options));

	                    $(self.$el).on('dbl-click-row.bs.table', function (e, row, $element) {
	                    	term = row.id;
                            let url = `/janesware/${self.forward}?term=${window.btoa(encodeURIComponent(term))}`;
                            window.open(url,'_blank');
			            });

			            $(self.$el).on('click-row.bs.table', function (e, row, $element) {
				            $('.info').removeClass('info');
				            $($element).addClass('info');
				        });
	                })
	            },
	            watch: {
				    data: {
				    	handler: function (val,oldVal) {
					    	let self = this;
					    	
					    	var cols= $(self.$el).bootstrapTable('getVisibleColumns');
			                
			                if(_.isEmpty(cols)){ // table null
			                    $(self.$el).bootstrapTable('destroy').bootstrapTable(_.extend({
			                                            data: val,
			                                            columns: self.columns
			                                        }, self.options));
			                } else {
			                    $(self.$el).bootstrapTable('load',val);
			                    $(self.$el).bootstrapTable('refreshOptions',self.options);
			                }
				    	},
				    	deep:true
				    }
				}
	        }); 

	        Vue.component('search-performance', {
				delimiters: ['${', '}'],
	            template: "#search-performance-template",
	            props:{
	                model: Object,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				}
	        }); 

	        Vue.component('search-graph', {
				delimiters: ['${', '}'],
	            template: "#search-graph-template",
	            props:{
	                model: Array,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				},
				filters: {
					pickName: function (item) {
						let self = this;

						if (_.isEmpty(item)) return '';

						let _name = _.head(item.name.split("."));

						/*if(!_.isEmpty(_name) && _.size(_name) > 9){
							_name = _.split(_name,"",9).join("") + "...";
						}*/

						return _name;
					},
					pickRemark: function (item) {
						let self = this;

						if (_.isEmpty(item.attr)) return '';

						let _remark = '';

						if(_.attempt(JSON.parse.bind(null, item.attr)).remark){

							_remark = _.attempt(JSON.parse.bind(null, item.attr)).remark;

							/*if(_.isEmpty(_remark)) return '';


							if($(window).width()>1280){
								if(_.size(_remark) > 50){
									_remark = _.split(_remark,"",49).join("") + "..."
								}
							} else {

								if(_.size(_remark) > 44){
									_remark = _.split(_remark,"",43).join("") + "..."
								}
							}*/

						}

						return _remark;
					},
					pickIcon: function(item){
						let self = this;

						return `${window.ASSETS_ICON}/files/png/${item.ftype}.png?type=download&issys=${window.SignedUser_IsAdmin}`;
					},
					readMore: function (text, length, suffix) {
						return text.substring(0, length) + suffix;
					},
					toLocalTime: function (value) {
						return moment(value).format("LLL");
					}
				},
				methods: {
					forwardCreative: function(action,item){
						let self = this;

						if(item.ftype === 'dir'){

						} else {
							let lang = window.MATRIX_LANG;

							item = _.merge(item,{lang: lang, action:action});

							let url = fsHandler.genFsUrl(item,null,null);

							window.open(url, "_blank");
						}
					}
				}
			}); 
			
			Vue.component('search-files', {
				delimiters: ['#{', '}#'],
	            template: "#search-files-template",
	            props:{
	                model: Array,
	                show: false,
	            },
	            mounted: function(){
					this.$nextTick(function () {
						$(this.$el).css("display","none");
					})
				},
	            watch: {
				    show: function (val) {
				    	if(val){
				    		$(this.$el).css("display","");
				    	} else {
				    		$(this.$el).css("display","none");
				    	}
				    }
				},
				filters: {
                    pickName: function(item){

                        if (_.isEmpty(item)) return '';

                        let _name = _.head(item.name.split("."));

                        if(!_.isEmpty(_name)){
                            _name = _.truncate(_name, {
                                'length': 9
                            });
                        }

                        return _name;
                    },
                    pickIcon: function(item){

                        // extend || ...
                        if( item.fullname === '/extend' ){
                            return `${window.ASSETS_ICON}/files/png/dir-lock.png?type=download&issys=${window.SignedUser_IsAdmin}`;
                        } else {

                            try{
                                return _.attempt(JSON.parse.bind(null, item.attr)).icon || `${window.ASSETS_ICON}/files/png/${item.ftype}.png?type=download&issys=${window.SignedUser_IsAdmin}`;
                            }
                            catch(error){
                                return `${window.ASSETS_ICON}/files/png/${item.ftype}.png?type=download&issys=${window.SignedUser_IsAdmin}`;
                            }
                        }

                    },
                    pickTags: function(item){

                        if(item.tags){
                            return item.tags.join(",");
                        } else {
                            return "";
                        }
                    },
	                pickAuthor: function(item){
                        if (!_.isEmpty(item.attr) || !_.isEqual(item.attr, 'null')) {
                            return _.attempt(JSON.parse.bind(null, item.attr)).author;
                        }
	                },
                    pickRemark: function(item){
                        if (!_.isEmpty(item.attr) || !_.isEqual(item.attr, 'null')) {
                            return _.attempt(JSON.parse.bind(null, item.attr)).remark;
                        }
                    }
				},
				methods:{
					mouseOver: function(item){
						let self = this;

						$(self.$el).find('.fs-node-highlight').removeClass('fs-node-highlight');
						$('#fs_node_'+item.id).find('.widget').addClass('fs-node-highlight');

					},
					mouseOut: function(item){
						let self = this;

						$('#fs_node_'+item.id).find('.fs-node-highlight').removeClass('fs-node-highlight');
					},
					openIt: function(item, path){
						let self = this;

						if(!_.isEmpty(item)){

							if(_.includes(['png','jpg','jpeg','gif'], item.ftype)) {


								let contents = `<img src="/fs${path}?type=open&issys=${window.SignedUser_IsAdmin}" class="preview-img-responsive center-block" alt="Image">`;
								let _wnd = maxWindow.winApp(item.name, contents, null,null);

							} else if(_.includes(['mov','mp4','avi'], item.ftype)) {

								let contents = `<div class="embed-responsive embed-responsive-16by9">
													<video src="/fs${path}?type=open&issys=${window.SignedUser_IsAdmin}" controls="controls" autoplay>
														your browser does not support the video tag
													</video>
												</div>
												`;

								let _wnd = maxWindow.winApp(item.name, contents, null,null);

							} else if(_.includes(['pdf'], item.ftype)) {

								let contents = `<div class="embed-responsive embed-responsive-16by9">
													<iframe class="embed-responsive-item" src="/fs${path}?type=open&issys=${window.SignedUser_IsAdmin}"></iframe>
												</div>`;

								let _wnd = maxWindow.winApp( item.name, contents, null,null);

							} else if(_.includes(['pptx','ppt'], item.ftype)) {

								window.open(`/fs${path}?type=download&issys=${window.SignedUser_IsAdmin}`, "_blank");

							} else if(_.includes(['js','ltsv','txt','csv','html'], item.ftype)) {

								window.open(`/fs${path}?type=open&issys=${window.SignedUser_IsAdmin}`, "_blank");

							} else if(_.includes(['swf'], item.ftype)) {
								let contents = `<div class="embed-responsive embed-responsive-16by9">
													<video src="/fs${path}?type=open&issys=${window.SignedUser_IsAdmin}" width="100%" height="100%" controls="controls" autoplay>
														Your browser does not support the video tag.
													</video>
												</div>`;

								let _wnd = maxWindow.winApp(item.name, contents, null,null);
							} else if(_.includes(['imap','iflow', 'ishow'], item.ftype)) {

								_.merge(item,{action:'run'});

								let url = fsHandler.genFsUrl(item,null,null);

								window.open(url,'_blank');
							} else if(_.includes(['md'], item.ftype)){
								_.merge(item,{action:'run'});

								let url = fsHandler.genFsUrl(item,{ header:true, sidebar:true, footbar:true },null);

								window.open(url,'_blank');
							}
						}
					}
				}
	        }); 

			/**
			 * @todo App Vue
			 */
			var appVue = new Vue({
				delimiters: ['${', '}'],
				el: '#app',
				template: '#app-template',
				data: {
					all: {
						list: []
					},
					event: {
						columns: [],
						options: {},
						data: []
					},
					syslog: {
						columns: [],
						options: {},
						data: []
					},
					performance: {
						columns: [],
						options: {},
						data: [],
					},
					log: {
						columns: [],
						options: {},
						data: []
					},
					raw: {
						columns: [],
						options: {},
						data: []
					},
					journal: {
						columns: [],
						options: {},
						data: []
					},
					tickets: {
						columns: [],
						options: {},
						data: []
					},
					change: {
						columns: [],
						options: {},
						data: []
					},
					files: [],
					graph: [],
					hisSearch: [],
					search: {
						param: "",
						result: [],
						content: [],
						words: [],

                        input: {
                            type: {type:"search",quick: ""},
                            term: ""
                        },
                        preset: {},
                        regexp: {
                            top: /top (\d+(\.\d)*)/gmi,
                            undefined:  /undefined/g,
                            doubleGrep: /\|(\s+(\|))/g,

                        }
					}
				},
				created: function(){
		            let self = this;
                    let _tmp = localStorage.getItem("search-object");
                    let _searchObject = _.attempt(JSON.parse.bind(null, _tmp));

                    self.search.input.term = _searchObject.cond;
                    self.search.preset = _searchObject.preset;

                    _.delay(function () {
                        eventHub.$on('preset-selected-event', self.setPresetDefault);
                    },500);

		            eventHub.$on("input-term-event", self.setSearchTerm);
		            eventHub.$on("input-reset-event", self.setSearchReset);
		        },
				mounted: function(){
					let self = this;

					self.$nextTick(function () {
					    _.delay(function () {
                            self.onSearch();
                        },500)
					})

				},
				computed: {
					ifShowEvent: function(){
						if(_.isEmpty(this.event.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowSyslog: function(){
						if(_.isEmpty(this.syslog.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowJournal: function(){
						if(_.isEmpty(this.journal.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowRaw: function(){
						if(_.isEmpty(this.raw.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowLog: function(){
						if(_.isEmpty(this.log.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowTickets: function(){
						if(_.isEmpty(this.tickets.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowChange: function(){
						if(_.isEmpty(this.change.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowPerformance: function(){
						if(_.isEmpty(this.performance.data)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowFiles: function(){
						if(_.isEmpty(this.files)) {
							return false;
						} else {
							return true;
						}
					},
					ifShowGraph: function(){
						if(_.isEmpty(this.graph)) {
							return false;
						} else {
							return true;
						}
					}
				},
				methods: {
					setPresetDefault: function(event){
                        let self = this;
	                    
	                    self.search.preset = event;
	                },
					setSearchTerm: function(param) {
                        let self = this;
						
						self.search.input.term = param;
					},
					setSearchReset: function(){
                        let self = this;
				    	
				        self.setSearchTerm("");
				        self.onSearch();
				    },
					onSearch: function () {
						let self = this;
						let _param = "";
                        let _preset = self.search.preset.default;
                        let _ifHistory = self.search.preset.others.ifHistory?"":"#";
                        let _ifDebug = self.search.preset.others.ifDebug?"debug> ":"";
                        let _forTime = self.search.preset.others.forTime;

						if(_.isEmpty(_preset) ){
                            _param = self.search.input.term;
		                } else {
                            _param = self.search.input.term + _preset.value;
		                }

                        _param = _ifDebug + _ifHistory + _param;

						let _list = omdbHandler.fetchData(_param);


                        let event = new Array();
                        let syslog = new Array();
                        let performance = new Array();
                        let log = new Array();
                        let raw = new Array();
                        let journal = new Array();
                        let tickets = new Array();
                        let change = new Array();
						let files = new Array();
						let graph = new Array();

                        if(_.isEmpty(_list.message)) {
                            event = [];
                            syslog = [];
                            performance = [];
                            log = [];
                            raw = [];
                            journal = [];
                            tickets = [];
                            change = [];
							files = [];
							graph = [];
                        } else {
                            _.filter(_list.message, function(d){
                                if( _.includes(d.class, '/matrix/devops/event/omnibus/journal') ){
                                    journal.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.journal.columns = window.GLOBAL_OBJECT.company.object.journal.columns;
                                    self.journal.options =  {
                                        toggle: "table",
                                        classes: "table table-no-bordered",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                } else if( _.includes(d.class, '/matrix/devops/event/syslog') ){
                                    syslog.push( _.merge(d, { preset: encodeURI(JSON.stringify(self.search.default)) } ));
                                    self.syslog.columns = window.GLOBAL_OBJECT.company.object.syslog.columns;
                                    self.syslog.options =  {
                                        classes: "table table-no-bordered",
                                        pageSize: "30",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        buttonsAlign: "right",
                                        search: false,
                                        showColumns: false,
                                        showExport: false,
                                        locale: '{{.Lang}}',
                                        rowStyle: 	function rowStyle(row, index) {
                                            return {
                                                classes: 'text-nowrap'
                                            };
                                        }
                                    };

                                } else if( _.includes(d.class, '/matrix/devops/event') ){
                                    event.push( _.merge(d, { preset: encodeURI(JSON.stringify(self.search.default)) } ));
                                    self.event.columns = window.GLOBAL_OBJECT.company.object.event.columns;
                                    self.event.options =  {
                                        classes: "table table-no-bordered",
                                        pageSize: "30",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        buttonsAlign: "right",
                                        search: false,
                                        showColumns: false,
                                        showExport: false,
                                        locale: '{{.Lang}}',
                                        rowStyle: 	function rowStyle(row, index) {
                                            return {
                                                classes: 'text-nowrap'
                                            };
                                        }
                                    };

                                } else if( _.includes(d.class, '/matrix/devops/log/raw') ){
                                    raw.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.raw.columns = window.GLOBAL_OBJECT.company.object.raw.columns;
                                    self.raw.options =  {
                                        toggle: "table",
                                        classes: "table table-no-bordered",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                } else if( _.includes(d.class, '/matrix/devops/log') ){
                                    log.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.log.columns = window.GLOBAL_OBJECT.company.object.log.columns;
                                    self.log.options =  {
                                        toggle: "table",
                                        classes: "table table-no-bordered",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                } else if( _.includes(d.class, '/matrix/devops/performance') ){
                                    performance.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.performance.columns = window.GLOBAL_OBJECT.company.object.performance.columns;
                                    self.performance.options =  {
                                        toggle: "table",
                                        classes: "table table-striped",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                } else if( _.includes(d.class, '/matrix/filesystem') ){
									if( _.includes(['imap','iflow','ishow','md'],d.ftype) ) {
										d = _.merge(d,{lang: window.mxLanguage, action:'run'});
										let url = fsHandler.genFsUrl(d,null,null);
										graph.push( _.merge(d,{tag: {"_all":[] }, preset: JSON.stringify(self.search.default), href: url }) );
                                    } else {
										files.push(d);
                                    }
                                } else if( _.includes(d.class, '/matrix/devops/tickets') ){
                                    tickets.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.tickets.columns = window.GLOBAL_OBJECT.company.object.tickets.columns;
                                    self.tickets.options =  {
                                        toggle: "table",
                                        classes: "table table-no-bordered",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                } else if( _.includes(d.class, '/matrix/devops/change') ){
                                    change.push( _.merge(d, { preset: JSON.stringify(self.search.default) } ));
                                    self.change.columns = window.GLOBAL_OBJECT.company.object.change.columns;
                                    self.change.options =  {
                                        toggle: "table",
                                        classes: "table table-no-bordered",
                                        pagination: false,
                                        showFooter: false,
                                        pageSize: "15",
                                        pageList: "[15,30,45,60]",
                                        detailView: false,
                                        showColumns: false,
                                        showExport: false,
                                    };
                                }
                            })
                        }

                        self.search.words = _list.meta.words;

                        self.event.data = event;
                        self.syslog.data = syslog;
                        self.performance.data = performance;
                        self.log.data = log;
                        self.raw.data = raw;
                        self.journal.data = journal;//self.filterByCond(journal,'serial');
                        self.tickets.data = tickets;
                        self.change.data = change;
						self.files = files;
						self.graph = graph;

                        self.all.list = _.cloneDeep(_list.message);

                        self.search.result = [];
                        self.search.result.push({name:'事件', count:self.event.data.length, href:"#search-event"});
                        self.search.result.push({name:'Syslog', count:self.syslog.data.length, href:"#search-syslog"});
                        self.search.result.push({name:'日志', count:self.log.data.length, href:"#search-log"});
                        self.search.result.push({name:'报文', count:self.raw.data.length, href:"#search-raw"});
                        self.search.result.push({name:'Journal', count:self.journal.data.length, href:"#search-journal"});
                        self.search.result.push({name:'性能', count:self.performance.data.length, href:"#search-performance"});
						self.search.result.push({name:'工单', count:self.tickets.data.length, href:"#search-tickets"});
						self.search.result.push({name:'变更单', count:self.change.data.length, href:"#search-change"});
						self.search.result.push({name:'文件', count:self.files.length, href:"#search-files"});
						self.search.result.push({name:'图', count:self.graph.length, href:"#search-graph"});

                    },
					filterByCond: function(data,cond){
						let self = this;
						let rtn = [];
						let param = "serial=" + _.map(data,cond).join(";serial=");
						let _list = omdbHandler.fetchData("#/matrix/devops/event/omnibus/journal/: | " + param);

						rtn = _list.message;

						return rtn;
					},
					toggleView: function(){
						let self = this;

						if($("#search-result-table").hasClass('active')){
							$("#search-result-table").removeClass('active');
							$("#search-result-timeline").addClass('active');
							$(".btn-toggle-view").html("视图");
						} else {
							$("#search-result-timeline").removeClass('active');
							$("#search-result-table").addClass('active');
							$(".btn-toggle-view").html("时间轴");
						}
					},
					forwardInView: function(href){
						let self = this;

						$("#search-result-timeline").removeClass('active');
						$("#search-result-table").addClass('active');
						$(".btn-toggle-view").html("时间轴");
						$("#content.content").css("padding-top","35px");

						document.location.href = href;
					}
				}
			});
			
			$(document).keypress(function(event) {
			    var keycode = (event.keyCode ? event.keyCode : event.which);
			    if (keycode == 13) {
			    	$("#btn_search").click();
			    } else if (keycode == 27) { 
			    	self.setSearchTerm("");
			    }
			})

			function formaterDate(value, row, index) {
				return moment(value).format('YYYY-MM-DD HH:mm:ss');
			}

			function formaterDate(value) {
				return moment(value).format('YYYY-MM-DD HH:mm:ss');	
			}
		})
	})

</script>

<script type="text/x-template" id="app-template">

	<div id="content" class="content container-fluid">

		<div class="row">
	  	
		  	<div class="col-lg-12">
		  		
				<div class="input-group">
				   	<vue-search-input-component :model="search.input"></vue-search-input-component>
					<div class="input-group-btn">
                        <vue-search-preset-component id="search-vue-search-preset" :preset="search.preset"></vue-search-preset-component>
                     </div>
					<div class="input-group-btn">
						<button type="button" class="btn btn-primary" id="btn_search" @click="onSearch"><i class="fa fa-search" style="font-size:18px;"></i></button>
					</div>
			    </div>

			    <p>
				
				<div class="panel"  style="background-color:transparent;">

					<div class="panel-body" id="div_result_view">
							
						<div class="searchinfo" style="background-color:transparent;border:0px;padding:0px 5px 0px 5px;display: -webkit-box;">
							<span style="font-size:16px;">{{.i18n.Tr "mxsearch_search_result"}}：</span>
	                        <small>
	                        	<a href="javascript:void(0)" @click="forwardInView(v.href)" v-for="(v,k) in search.result" style="margin-right:10px;"><u>${v.name}: ${v.count}</u></a>
	                        </small>
	                        <div class="pull-right">
	                        	<a href="javascript:void(0)" @click="toggleView" class="btn btn-xs btn-info btn-toggle-view">时间轴</a>
	                        </div>
						</div>
						<BR/>

						
						<div class="tab-content" style="padding:0px;background-color:transparent;">
							<div role="tabpanel" class="tab-pane active" id="search-result-table">
								<search-event :model="event" :show="ifShowEvent"></search-event>

								<search-syslog :model="syslog" :show="ifShowSyslog"></search-syslog>

								<search-journal :model="journal" :show="ifShowJournal"></search-journal>

								<search-raw :model="raw" :show="ifShowRaw"></search-raw>
								
								<search-log :model="log" :show="ifShowLog"></search-log>

								<search-tickets :model="tickets" :show="ifShowTickets"></search-tickets>

								<search-change :model="change" :show="ifShowChange"></search-change>
								
								<search-performance :model="performance" :show="ifShowPerformance"></search-performance>
								
								<search-files :model="files" :show="ifShowFiles"></search-files>

								<search-graph :model="graph" :show="ifShowGraph"></search-graph>
							</div>
							<div role="tabpanel" class="tab-pane" id="search-result-timeline" style="background:#ffffff;padding:15px 0px;">
								<vue-timeline-component id="result-timeline" :model="all"></vue-timeline-component>
							</div>
						</div>
						

					</div>

				</div>
			</div>

		    <div class="col-lg-2" style="display:none;">
			    <div style="margin-left: -10px;padding: 10px;background-color:#fff;">
				    <span style="font-size:16px">{{.i18n.Tr "mxsearch_search_history"}}</span>
	    			<ol class="rectangle-list">
				
						<li v-for="item in hisSearch">
							<a href="#" @click="setSearchTerm(item.search);" style="word-break:break-all;">${item.search}</a>
						</li>
					</ol>
				</div>
		    </div>
		</div>

	</div>
</script>

<script type="text/x-template" id="search-event-template">
	<div id="search-event" class="animated fadeIn">
		<div class="well well-default expandit">
						    
			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-exclamation-triangle" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseEvent" aria-expanded="true" aria-controls="collapseEvent">
			  		{{.i18n.Tr "mxsearch_search_event"}}
				</a>
			</h5>
		    
			<div class="collapse in" id="collapseEvent">
			  	<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#event-table" aria-controls="event-table" role="tab" data-toggle="tab" style="border:none;">
			  					<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#event-list" aria-controls="event-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="event-table">
			  				<bootstrap-table-search :columns="model.columns" 
			  										:options="model.options" 
			  										:data="model.data"
			  										forward="event"></bootstrap-table-search>
			  			</div>
			  			<div role="tabpanel" class="tab-pane" id="event-list">
			  				<span v-for="item in model.data">
						    	<h6><a :href="'/janesware/event?cond='+item.id+'&preset='+item.preset" target="_blank">${item.host}</a></h6>
								<span class="text-muted">
									<span v-if="item.severity == '5'">
									  <kbd style="color:#FFFFFF;background-color:#FF0000;">Critical</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '4' ">
									  <kbd style="color:#FFFFFF;background-color:#FFA500;">Major</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '3' ">
									  <kbd style="color:#FFFFFF;background-color:#FFD700;">Minor</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '2' ">
									  <kbd style="color:#FFFFFF;background-color:#0000FF;">Warning</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '1' ">
									  <kbd style="color:#FFFFFF;background-color:#800080;">Indeterminate</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '0' ">
									  <kbd style="color:#FFFFFF;background-color:#008000;">Clear</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else>
									  <kbd style="color:#FFFFFF;background-color:#808080;">Unknown</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<i class="fa fa-time"></i> {{.i18n.Tr "mxsearch_search_time"}}： ${ new Date(item.vtime).toLocaleString() }  &nbsp;&nbsp;&nbsp;&nbsp;							
									<i class="fa fa-tag" v-for="(k,v) in item.tag"> <a href="#"> ${ v } </a> &nbsp; </i> 
								</span>
								<p>${item.msg}</p>
								<hr/>
							</span>
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-syslog-template">
	<div id="search-syslog"  class="animated fadeIn">
		<div class="well well-default expandit">
						    
			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-exclamation-triangle" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseSyslog" aria-expanded="true" aria-controls="collapseSyslog">
			  		{{.i18n.Tr "mxsearch_search_syslog"}}
				</a>
			</h5>
		    
			<div class="collapse in" id="collapseSyslog">
			  	<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#syslog-table" aria-controls="syslog-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#syslog-list" aria-controls="syslog-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="syslog-table">
			  				<bootstrap-table-search :columns="model.columns" 
			  										:options="model.options" 
			  										:data="model.data"
			  										forward="event"></bootstrap-table-search>
			  			</div>
			  			<div role="tabpanel" class="tab-pane" id="syslog-list">
			  				<span v-for="item in model.data">
						    	<h6><a :href="'/janesware/event?cond='+item.id+'&preset='+item.preset" target="_blank">${item.host}</a></h6>
								<span class="text-muted">
									<span v-if="item.severity == '5'">
									  <kbd style="color:#FFFFFF;background-color:#FF0000;">Critical</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '4' ">
									  <kbd style="color:#FFFFFF;background-color:#FFA500;">Major</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '3' ">
									  <kbd style="color:#FFFFFF;background-color:#FFD700;">Minor</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '2' ">
									  <kbd style="color:#FFFFFF;background-color:#0000FF;">Warning</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '1' ">
									  <kbd style="color:#FFFFFF;background-color:#800080;">Indeterminate</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '0' ">
									  <kbd style="color:#FFFFFF;background-color:#008000;">Clear</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else>
									  <kbd style="color:#FFFFFF;background-color:#808080;">Unknown</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<i class="fa fa-time"></i> {{.i18n.Tr "mxsearch_search_time"}}： ${ new Date(item.vtime).toLocaleString() }  &nbsp;&nbsp;&nbsp;&nbsp;							
									<i class="fa fa-tag" v-for="(k,v) in item.tag"> <a href="#"> ${ v } </a> &nbsp; </i> 
								</span>
								<p>${item.msg}</p>
								<hr/>
							</span>
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-journal-template">
	<div id="search-journal"  class="animated fadeIn">
		<div class="well well-default expandit">

			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-film" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseJournal" aria-expanded="true" aria-controls="collapseJournal">			{{.i18n.Tr "mxsearch_search_journal"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseJournal">
				<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#journal-table" aria-controls="journal-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#journal-list" aria-controls="journal-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="journal-table">
			  				<bootstrap-table-search :columns="model.columns" 
			  										:options="model.options" 
													  :data="model.data"
													  forward="event"></bootstrap-table-search>
			  			</div>
			  			<div role="tabpanel" class="tab-pane" id="journal-list">
			  				
							<span v-for="item in model.data">

						    	<h5><a href="#" target="_blank"><ins>${item.host}</ins></a></h5>

								<span class="text-muted">
									<i class="fa fa-time"></i> {{.i18n.Tr "mxsearch_search_time"}}：${ new Date(item.vtime).toLocaleString() }  &nbsp;&nbsp;&nbsp;&nbsp;
									<i class="fa fa-tag" v-for="(k,v) in item.tag"> <a href="#"> ${ v } </a> &nbsp; </i> 
								</span>
								<p>
									${item.msg}
								</p>

								<hr/>
							</span>
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-raw-template">
	<div id="search-raw"  class="animated fadeIn">
		<div class="well well-default expandit">

			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-file-code" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseRaw" aria-expanded="true" aria-controls="collapseRaw">			{{.i18n.Tr "mxsearch_search_raw"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseRaw">
				<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#raw-table" aria-controls="raw-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#raw-list" aria-controls="raw-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="raw-table">
			  				<bootstrap-table-search :columns="model.columns" 
			  										:options="model.options" 
													:data="model.data"
													forward="log"></bootstrap-table-search>
			  			</div>
			  			<div role="tabpanel" class="tab-pane" id="raw-list">
			  				
							<span v-for="item in model.data">

						    	<h5><a :href="'/janesware/event?cond='+item.id+'&preset='+item.preset" target="_blank"><ins>${item.host}</ins></a></h5>

								<span class="text-muted">
									<span v-if="item.severity == '5'">
									  <kbd style="color:#FFFFFF;background-color:#FF0000;">Critical</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '4' ">
									  <kbd style="color:#FFFFFF;background-color:#FFA500;">Major</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '3' ">
									  <kbd style="color:#FFFFFF;background-color:#FFD700;">Minor</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '2' ">
									  <kbd style="color:#FFFFFF;background-color:#0000FF;">Warning</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '1' ">
									  <kbd style="color:#FFFFFF;background-color:#800080;">Indeterminate</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '0' ">
									  <kbd style="color:#FFFFFF;background-color:#008000;">Clear</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else>
									  <kbd style="color:#FFFFFF;background-color:#808080;">Unknown</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<i class="fa fa-time"></i> {{.i18n.Tr "mxsearch_search_time"}}：${ new Date(item.vtime).toLocaleString() }  &nbsp;&nbsp;&nbsp;&nbsp;
									<i class="fa fa-tag" v-for="(k,v) in item.tag"> <a href="#"> ${ v } </a> &nbsp; </i> 
								</span>
								<p>
									${item.msg}
								</p>

								<hr/>
							</span>
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-log-template">
	<div id="search-log"  class="animated fadeIn">
		<div class="well well-default expandit">

			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-file-code" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseLog" aria-expanded="true" aria-controls="collapseLog">			{{.i18n.Tr "mxsearch_search_log"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseLog">
				<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#log-table" aria-controls="log-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#log-list" aria-controls="log-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="log-table">
			  				<bootstrap-table-search :columns="model.columns" 
		  											:options="model.options" 
		  											:data="model.data"
		  											forward="log"></bootstrap-table-search>
			  			</div>
			  			<div role="tabpanel" class="tab-pane" id="log-list">
			  				
							<span v-for="item in model.data">

						    	<h5><a :href="'/janesware/log?cond='+item.id+'&preset='+item.preset" target="_blank"><ins>${item.host}</ins></a></h5>

								<span class="text-muted">
									<span v-if="item.severity == '5'">
									  <kbd style="color:#FFFFFF;background-color:#FF0000;">Critical</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '4' ">
									  <kbd style="color:#FFFFFF;background-color:#FFA500;">Major</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '3' ">
									  <kbd style="color:#FFFFFF;background-color:#FFD700;">Minor</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '2' ">
									  <kbd style="color:#FFFFFF;background-color:#0000FF;">Warning</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '1' ">
									  <kbd style="color:#FFFFFF;background-color:#800080;">Indeterminate</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else-if="item.severity === '0' ">
									  <kbd style="color:#FFFFFF;background-color:#008000;">Clear</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<span v-else>
									  <kbd style="color:#FFFFFF;background-color:#808080;">Unknown</kbd>&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
									<i class="fa fa-time"></i> {{.i18n.Tr "mxsearch_search_time"}}：${ new Date(item.vtime).toLocaleString() }  &nbsp;&nbsp;&nbsp;&nbsp;
									<i class="fa fa-tag" v-for="(k,v) in item.tag"> <a href="#"> ${ v } </a> &nbsp; </i> 
								</span>
								<p>
									${item.msg}
								</p>

								<hr/>
							</span>
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-tickets-template">
	<div id="search-tickets" class="animated fadeIn">  
		<div class="well well-default expandit">

			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-book" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseTickets" aria-expanded="true" aria-controls="collapseTickets">
					{{.i18n.Tr "mxsearch_search_ticket"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseTickets">
				<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#tickets-table" aria-controls="tickets-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#tickets-list" aria-controls="tickets-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="tickets-table">
			  				
			  				<bootstrap-table-search :columns="model.columns" 
			  										:options="model.options" 
			  										:data="model.data">
			  				</bootstrap-table-search>
			  				
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-change-template">
	<div id="search-change" class="animated fadeIn">  
		<div class="well well-default expandit">

			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-book" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseChange" aria-expanded="true" aria-controls="collapseChange">
					{{.i18n.Tr "mxsearch_search_change"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseChange">
				<div role="tabpanel">
			  		<!-- Nav tabs -->
			  		<ul class="nav nav-tabs" role="tablist" style="border:none;float:right;position: relative;top: 0px;background-color:transparent;">
			  			<li role="presentation" class="active">
			  				<a href="#change-table" aria-controls="change-table" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-table"></i>
			  				</a>
			  			</li>
			  			<li role="presentation">
			  				<a href="#change-list" aria-controls="change-list" role="tab" data-toggle="tab" style="border:none;">
								<i class="fas fa-list-ul"></i>
			  				</a>
			  			</li>
			  		</ul>
			  	
			  		<!-- Tab panes -->
			  		<div class="tab-content">
			  			<div role="tabpanel" class="tab-pane active" id="change-table">
			  				
			  					<bootstrap-table-search :columns="model.columns" 
			  											:options="model.options" 
			  											:data="model.data">
			  					</bootstrap-table-search>
			  				
			  			</div>
			  		</div>
			  	</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-performance-template">
	<div id="search-performance" class="animated fadeIn">  
		<div class="well well-default expandit">
			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fab fa-creative-commons-sampling" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapsePerformance" aria-expanded="true" aria-controls="collapsePerformance">
					{{.i18n.Tr "mxsearch_search_performance"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapsePerformance">
				<bootstrap-table-search :columns="model.columns" 
										:options="model.options" 
										:data="model.data"
			  							forward="performance"></bootstrap-table-search>
			</div>
		</div>
	</div>
</script>

<script type="text/x-template" id="search-files-template">
	<div id="search-files" class="animated fadeIn">  
		<div class="well well-default expandit">
			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-book" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseFiles" aria-expanded="true" aria-controls="collapseFiles">
					文件
				</a>
			</h5>
			
			<div class="collapse in" id="collapseFiles">
				<div id="list">
					<ul>
					   <li :class="item.ftype=='dir'?'dir fs-node context-menu-file':'fs-node context-menu-file'"
							:id="'fs_node_'+item.id"
							@mouseover="mouseOver(item)"
							@mouseout="mouseOut(item)"
							style="cursor: pointer;"
							:title="item.name"
							v-for="item in model">
						   <div class="widget widget-stats bg-silver animated fadeIn" :id="'fs_node_widget_'+item.id">
							   <div class="stats-info" @dblclick="openIt(item, item.parent+'/'+item.name);" >
								   <p><img class="media-object" :src="item | pickIcon" onerror="this.src='${window.ASSETS_ICON}files/png/dir.png?type=download&issys=${window.SignedUser_IsAdmin}';"></p>
							   </div>
							   <div class="stats-link">
								   <a class="fs-name" :data-pk="item.id" href="javascript:void(0);" style="text-align: left;margin:15px -15px -15px -15px;padding: 10px;" :title="item.title" :data-info="JSON.stringify(item)">
									   <p><i class="fas fa-plug"></i>  名称：#{item.name}#</p>
									   <p><i class="fas fa-user"></i>  作者：#{item|pickAuthor}# </p>
									   <p><i class="fas fa-clock"></i> 创建：#{moment(item.vtime).format("YYYY-MM-DD hh:mm:ss")}# </p>
									   <!--<p><i class="fas fa-tree"></i>  类型：#{item.ftype=='dir'?'目录':item.ftype}#</p>-->
									   <!-- <p><i class="fas fa-tags"></i>  标签：<input type="text" class="tags" name="tags" :value="item|pickTags"></p> -->
									   <p><i class="fab fa-readme"></i>  描述：#{item|pickRemark}#</p>
								   </a>
							   </div>
							   <div class="list-context-menu" :data-item="JSON.stringify(item)" style="position: absolute;right: 10px;top: 5px;cursor:pointer;">
								   <i class="fa fa-bars"></i>
							   </div>
						   </div>
					   </li>
				   </ul></div>
		    </div>
	    </div>
	</div>
</script>

<script type="text/x-template" id="search-graph-template">
	<div id="search-graph" class="animated fadeIn">  
		<div class="well well-default expandit">
			<h5>
				<span class="badge" style="background-color:#fff;"><i class="fas fa-book" style="color:rgba(3,3,3,0.5);"></i></span>
				<a data-toggle="collapse" href="#collapseITmap" aria-expanded="true" aria-controls="collapseITmap">
					{{.i18n.Tr "mxsearch_search_graph"}}
				</a>
			</h5>
			
			<div class="collapse in" id="collapseITmap">
				<div class="row">
		            <div class="col-md-3 col-sm-6" v-for="(item,index) in model" >
						<div :class="'widget widget-stats animated fadeIn bg-info ' + item.ftype">
							<div @click="forwardCreative('run',item)">
								<div class="stats-title">
									<i class="fa fa-braille fa-fw"></i>
									<span class="fs-name" :data-info="JSON.stringify(item)">${ item | pickName}</span>
								</div>

								<div class="stats-subtitle">
									${item | pickRemark}
								</div>

								<div class="media">
									<div class="media-left">
										<img class="media-object" :src="item | pickIcon">
									</div>
									<div class="media-body">
										<p>项目作者： ${item.username}</p>
										<p>更新日期： ${ moment(item.vtime).format("L") }</p>
										<p>更新时间： ${ moment(item.vtime).format("LTS") }</p>
										<p class="status">
											项目状态： 就绪
										</p>
									</div>
								</div>

							</div>
						</div>
					</div>
		        </div>
		    </div>
	    </div>
	</div>
</script>

{{template "base/footer" .}}
